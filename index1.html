<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2566">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083; min-height: 16.0px}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083; background-color: #171818}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s5 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s6 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s7 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s8 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s9 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s10 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s11 {font-kerning: none}
    span.s12 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
    span.s13 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
    span.s14 {font-kerning: none; color: #a34f83; background-color: #171818; -webkit-text-stroke: 0px #a34f83}
    span.s15 {font-kerning: none; color: #ee2e38; background-color: #171818; -webkit-text-stroke: 0px #ee2e38}
    span.s16 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s17 {font-kerning: none; color: #cacaca; -webkit-text-stroke: 0px #cacaca}
    span.s18 {font-kerning: none; color: #d4d4d4; -webkit-text-stroke: 0px #d4d4d4}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">html</span><span class="s5"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s1">"zh-TW"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s6">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s5"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">title</span><span class="s3">&gt;</span><span class="s1">Seoul Trip 2025-26</span><span class="s3">&lt;/</span><span class="s4">title</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">link</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">link</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&amp;family=Noto+Sans+TC:wght@300;400;500;700&amp;display=swap"</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>tailwind</span><span class="s7">.</span><span class="s1">config </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>theme</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>extend</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>colors</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'app-bg'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#FDFCF8'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'app-card'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#FFFFFF'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'app-text'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#464F41'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'app-accent'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#849B87'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'app-soft'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#E6EBE6'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'danger'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#D48989'</span><span class="s7">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s1">'cat-food'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#F97316'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'cat-trans'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#3B82F6'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'cat-shop'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#EC4899'</span><span class="s7">,</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s1">'cat-stay'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#8B5CF6'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'cat-spot'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#10B981'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'cat-ticket'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#F59E0B'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'cat-other'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#6B7280'</span><span class="s7">,</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s1">'payer-public'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#9CA3AF'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'payer-andy'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#60A5FA'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'payer-lynn'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#F472B6'</span><span class="s7">,</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s1">'plan-transport'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#F0F4F8'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'plan-ticket'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#FFF9EB'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'plan-note'</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'#F3F0F5'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">},</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span>fontFamily</span><span class="s7">:</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> sans</span><span class="s7">:</span><span class="s5"> </span><span class="s7">[</span><span class="s1">'"Zen Maru Gothic"'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'"Noto Sans TC"'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'sans-serif'</span><span class="s7">]</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">body</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">background-color:</span><span class="s5"> #FDFCF8</span><span class="s7">;</span><span class="s5"> </span><span class="s1">color:</span><span class="s5"> #464F41</span><span class="s7">;</span><span class="s5"> </span><span class="s1">padding-bottom:</span><span class="s5"> </span><span class="s9">90px</span><span class="s7">;</span><span class="s5"> </span><span class="s1">-webkit-tap-highlight-color:</span><span class="s5"> </span><span class="s6">transparent</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.no-scrollbar::-webkit-scrollbar</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s2">display:</span><span class="s5"> </span><span class="s6">none</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.no-scrollbar</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">-ms-overflow-style:</span><span class="s5"> </span><span class="s6">none</span><span class="s7">;</span><span class="s5"> </span><span class="s1">scrollbar-width:</span><span class="s5"> </span><span class="s6">none</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.fade-in</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s2">animation:</span><span class="s5"> </span><span class="s1">fadeIn</span><span class="s5"> </span><span class="s9">0.3s</span><span class="s5"> </span><span class="s1">ease-in-out</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s10">@keyframes</span><span class="s5"> </span><span class="s6">fadeIn</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s6">from</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">opacity:</span><span class="s5"> </span><span class="s9">0</span><span class="s7">;</span><span class="s5"> </span><span class="s1">transform:</span><span class="s5"> </span><span class="s6">translateY(</span><span class="s9">5px</span><span class="s6">)</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span><span class="s5"> </span><span class="s6">to</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">opacity:</span><span class="s5"> </span><span class="s9">1</span><span class="s7">;</span><span class="s5"> </span><span class="s1">transform:</span><span class="s5"> </span><span class="s6">translateY(</span><span class="s9">0</span><span class="s6">)</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.custom-checkbox:checked</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> </span><span class="s4">div</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #849B87</span><span class="s7">;</span><span class="s1"> </span><span class="s2">border-color:</span><span class="s1"> #849B87</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.custom-checkbox:checked</span><span class="s5"> </span><span class="s7">+</span><span class="s5"> </span><span class="s4">div:after</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">content:</span><span class="s5"> </span><span class="s8">'\2714'</span><span class="s7">;</span><span class="s5"> </span><span class="s1">color:</span><span class="s5"> </span><span class="s6">white</span><span class="s7">;</span><span class="s5"> </span><span class="s1">font-size:</span><span class="s5"> </span><span class="s9">14px</span><span class="s7">;</span><span class="s5"> </span><span class="s1">display:</span><span class="s5"> </span><span class="s6">block</span><span class="s7">;</span><span class="s5"> </span><span class="s1">text-align:</span><span class="s5"> </span><span class="s6">center</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.tab-active</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">color:</span><span class="s5"> #849B87</span><span class="s7">;</span><span class="s5"> </span><span class="s1">border-bottom:</span><span class="s5"> </span><span class="s9">2px</span><span class="s5"> </span><span class="s6">solid</span><span class="s5"> #849B87</span><span class="s7">;</span><span class="s5"> </span><span class="s1">font-weight:</span><span class="s5"> </span><span class="s6">bold</span><span class="s7">;</span><span class="s5"> </span><span class="s1">background-color:</span><span class="s5"> </span><span class="s6">rgba(</span><span class="s9">132</span><span class="s7">,</span><span class="s5"> </span><span class="s9">155</span><span class="s7">,</span><span class="s5"> </span><span class="s9">135</span><span class="s7">,</span><span class="s5"> </span><span class="s9">0.1</span><span class="s6">)</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.tab-inactive</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #A0A0A0</span><span class="s7">;</span><span class="s1"> </span><span class="s2">border-bottom:</span><span class="s1"> </span><span class="s9">2px</span><span class="s1"> </span><span class="s6">solid</span><span class="s1"> </span><span class="s6">transparent</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">/* Calculator */</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.calc-grid</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">display:</span><span class="s5"> </span><span class="s6">grid</span><span class="s7">;</span><span class="s5"> </span><span class="s1">grid-template-columns:</span><span class="s5"> </span><span class="s6">repeat(</span><span class="s9">4</span><span class="s7">,</span><span class="s5"> </span><span class="s9">1fr</span><span class="s6">)</span><span class="s7">;</span><span class="s5"> </span><span class="s1">gap:</span><span class="s5"> </span><span class="s9">10px</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.calc-btn</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> @apply text-xl font-bold rounded-2xl </span><span class="s2">active:</span><span class="s1">scale-95</span><span class="s5"> </span><span class="s1">transition-transform</span><span class="s5"> </span><span class="s1">flex</span><span class="s5"> </span><span class="s1">items-center</span><span class="s5"> </span><span class="s1">justify-center</span><span class="s5"> </span><span class="s1">select-none</span><span class="s5"> </span><span class="s1">cursor-pointer</span><span class="s5"> </span><span class="s1">shadow-sm</span><span class="s5"> </span><span class="s1">h-14</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.calc-num</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> @apply bg-[#F5F5F0] text-gray-600; </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.calc-func</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> @apply bg-[#E0E8E4] text-[#5A6B5D]; </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.calc-op</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> @apply bg-[#CCD5D0] text-[#464F41]; </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.calc-eq</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> @apply bg-app-accent text-white shadow-md; </span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.select-wrapper</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s2">position:</span><span class="s5"> </span><span class="s6">relative</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.select-wrapper::after</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">content:</span><span class="s5"> </span><span class="s8">'\f078'</span><span class="s7">;</span><span class="s5"> </span><span class="s1">font-family:</span><span class="s5"> </span><span class="s8">'Font Awesome 6 Free'</span><span class="s7">;</span><span class="s5"> </span><span class="s1">font-weight:</span><span class="s5"> </span><span class="s9">900</span><span class="s7">;</span><span class="s5"> </span><span class="s1">position:</span><span class="s5"> </span><span class="s6">absolute</span><span class="s7">;</span><span class="s5"> </span><span class="s1">right:</span><span class="s5"> </span><span class="s9">12px</span><span class="s7">;</span><span class="s5"> </span><span class="s1">top:</span><span class="s5"> </span><span class="s9">50%</span><span class="s7">;</span><span class="s5"> </span><span class="s1">transform:</span><span class="s5"> </span><span class="s6">translateY(</span><span class="s9">-50%</span><span class="s6">)</span><span class="s7">;</span><span class="s5"> </span><span class="s1">color:</span><span class="s5"> #A0A0A0</span><span class="s7">;</span><span class="s5"> </span><span class="s1">font-size:</span><span class="s5"> </span><span class="s9">0.7rem</span><span class="s7">;</span><span class="s5"> </span><span class="s1">pointer-events:</span><span class="s5"> </span><span class="s6">none</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.drag-handle</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">cursor:</span><span class="s5"> </span><span class="s6">grab</span><span class="s7">;</span><span class="s5"> </span><span class="s1">touch-action:</span><span class="s5"> </span><span class="s6">none</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.dragging</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s9">0.5</span><span class="s7">;</span><span class="s1"> </span><span class="s2">background:</span><span class="s1"> #fafafa</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.plan-detail</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">max-height:</span><span class="s5"> </span><span class="s9">0</span><span class="s7">;</span><span class="s5"> </span><span class="s1">overflow:</span><span class="s5"> </span><span class="s6">hidden</span><span class="s7">;</span><span class="s5"> </span><span class="s1">transition:</span><span class="s5"> </span><span class="s6">max-height</span><span class="s5"> </span><span class="s9">0.3s</span><span class="s5"> </span><span class="s6">ease-out</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.plan-detail.expanded</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">max-height:</span><span class="s5"> </span><span class="s9">500px</span><span class="s7">;</span><span class="s5"> </span><span class="s1">transition:</span><span class="s5"> </span><span class="s6">max-height</span><span class="s5"> </span><span class="s9">0.3s</span><span class="s5"> </span><span class="s6">ease-in</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.plan-arrow</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">transition:</span><span class="s1"> </span><span class="s6">transform</span><span class="s1"> </span><span class="s9">0.3s</span><span class="s1"> </span><span class="s6">ease</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.plan-arrow.expanded</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s2">transform:</span><span class="s5"> </span><span class="s6">rotate(</span><span class="s9">180deg</span><span class="s6">)</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s4">.map-wrapper</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">overflow:</span><span class="s5"> </span><span class="s6">auto</span><span class="s7">;</span><span class="s5"> </span><span class="s1">touch-action:</span><span class="s5"> </span><span class="s6">none</span><span class="s7">;</span><span class="s5"> </span><span class="s1">width:</span><span class="s5"> </span><span class="s9">100%</span><span class="s7">;</span><span class="s5"> </span><span class="s1">height:</span><span class="s5"> </span><span class="s9">100%</span><span class="s7">;</span><span class="s5"> </span><span class="s1">position:</span><span class="s5"> </span><span class="s6">relative</span><span class="s7">;</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">body</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"font-sans antialiased"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">header</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed top-0 left-0 right-0 bg-app-card shadow-sm z-40 h-14 flex items-center justify-center border-b border-[#F0F0F0]"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">h1</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-lg font-bold tracking-widest text-app-accent"</span><span class="s3">&gt;</span><span class="s5">SEOUL 2026</span><span class="s3">&lt;/</span><span class="s4">h1</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">header</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">main</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"app"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"pt-16 px-4 max-w-md mx-auto min-h-screen"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- Content injected by JS --&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">main</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">nav</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur border-t border-gray-100 h-16 flex justify-around items-center z-50 pb-safe shadow-[0_-2px_10px_rgba(0,0,0,0.02)]"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"router('plan')"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-app-accent transition-colors"</span><span class="s5"> </span><span class="s2">data-target</span><span class="s3">=</span><span class="s1">"plan"</span><span class="s3">&gt;&lt;</span><span class="s4">i</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fa-solid fa-calendar-days text-xl mb-1"</span><span class="s3">&gt;&lt;/</span><span class="s4">i</span><span class="s3">&gt;&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-[10px]"</span><span class="s3">&gt;</span><span class="s5">行程</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"router('map')"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-app-accent transition-colors"</span><span class="s5"> </span><span class="s2">data-target</span><span class="s3">=</span><span class="s1">"map"</span><span class="s3">&gt;&lt;</span><span class="s4">i</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fa-solid fa-map text-xl mb-1"</span><span class="s3">&gt;&lt;/</span><span class="s4">i</span><span class="s3">&gt;&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-[10px]"</span><span class="s3">&gt;</span><span class="s5">地圖</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"router('wallet')"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"nav-btn flex flex-col items-center justify-center w-full h-full text-app-accent transition-colors"</span><span class="s5"> </span><span class="s2">data-target</span><span class="s3">=</span><span class="s1">"wallet"</span><span class="s3">&gt;&lt;</span><span class="s4">i</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fa-solid fa-wallet text-xl mb-1"</span><span class="s3">&gt;&lt;/</span><span class="s4">i</span><span class="s3">&gt;&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-[10px]"</span><span class="s3">&gt;</span><span class="s5">記帳</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"router('lists')"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-app-accent transition-colors"</span><span class="s5"> </span><span class="s2">data-target</span><span class="s3">=</span><span class="s1">"lists"</span><span class="s3">&gt;&lt;</span><span class="s4">i</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fa-solid fa-list-check text-xl mb-1"</span><span class="s3">&gt;&lt;/</span><span class="s4">i</span><span class="s3">&gt;&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-[10px]"</span><span class="s3">&gt;</span><span class="s5">清單</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"router('info')"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-app-accent transition-colors"</span><span class="s5"> </span><span class="s2">data-target</span><span class="s3">=</span><span class="s1">"info"</span><span class="s3">&gt;&lt;</span><span class="s4">i</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fa-solid fa-circle-info text-xl mb-1"</span><span class="s3">&gt;&lt;/</span><span class="s4">i</span><span class="s3">&gt;&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-[10px]"</span><span class="s3">&gt;</span><span class="s5">資訊</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">nav</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"calcModal"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed inset-0 bg-black/40 z-[60] hidden flex flex-col justify-end fade-in backdrop-blur-sm"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white rounded-t-3xl p-5 shadow-2xl"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex justify-between items-center mb-4"</span><span class="s3">&gt;&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-gray-500 font-bold ml-2"</span><span class="s3">&gt;</span><span class="s5">金額計算</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"closeCalc()"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-400 hover:bg-gray-200"</span><span class="s3">&gt;&lt;</span><span class="s4">i</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fa-solid fa-xmark"</span><span class="s3">&gt;&lt;/</span><span class="s4">i</span><span class="s3">&gt;&lt;/</span><span class="s4">button</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-[#F9F9F7] p-3 rounded-2xl mb-5 text-right text-3xl font-mono text-app-text h-16 flex items-center justify-end overflow-hidden shadow-inner border border-gray-100"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"calcDisplay"</span><span class="s3">&gt;</span><span class="s5">0</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-grid mb-safe"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-func"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('(')"</span><span class="s3">&gt;</span><span class="s5">(</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-func"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend(')')"</span><span class="s3">&gt;</span><span class="s5">)</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-func"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('/100')"</span><span class="s3">&gt;</span><span class="s5">%</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-func"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcClear()"</span><span class="s3">&gt;</span><span class="s5">AC</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('7')"</span><span class="s3">&gt;</span><span class="s5">7</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('8')"</span><span class="s3">&gt;</span><span class="s5">8</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('9')"</span><span class="s3">&gt;</span><span class="s5">9</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-op"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('/')"</span><span class="s3">&gt;</span><span class="s5">÷</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('4')"</span><span class="s3">&gt;</span><span class="s5">4</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('5')"</span><span class="s3">&gt;</span><span class="s5">5</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('6')"</span><span class="s3">&gt;</span><span class="s5">6</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-op"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('*')"</span><span class="s3">&gt;</span><span class="s5">×</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('1')"</span><span class="s3">&gt;</span><span class="s5">1</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('2')"</span><span class="s3">&gt;</span><span class="s5">2</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('3')"</span><span class="s3">&gt;</span><span class="s5">3</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-op"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('-')"</span><span class="s3">&gt;</span><span class="s5">-</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('0')"</span><span class="s3">&gt;</span><span class="s5">0</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-num"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('.')"</span><span class="s3">&gt;</span><span class="s5">.</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-eq"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcConfirm()"</span><span class="s3">&gt;</span><span class="s5">=</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"calc-btn calc-op"</span><span class="s5"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"calcAppend('+')"</span><span class="s3">&gt;</span><span class="s5">+</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- JAVASCRIPT LOGIC --&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> config </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> currencyRate</span><span class="s7">:</span><span class="s1"> </span><span class="s12">0.024</span><span class="s7">,</span><span class="s1"> currencySymbol</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'₩'</span><span class="s7">,</span><span class="s1"> homeCurrency</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'NT$'</span><span class="s1"> </span><span class="s7">};</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> staticData </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>flights</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> outbound</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> date</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'12/31'</span><span class="s7">,</span><span class="s1"> code</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'BR0170'</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'07:05 - 10:30'</span><span class="s1"> </span><span class="s7">},</span><span class="s1"> inbound</span><span class="s7">:</span><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s7">{</span><span class="s1"> date</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'01/03'</span><span class="s7">,</span><span class="s1"> code</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'BR0159'</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'19:45 - 21:40'</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>itinerary</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>day</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'12/31 (三)'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'跨年 &amp; 南山塔'</span><span class="s7">,</span><span class="s1"> shortTitle</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'D1 12/31'</span><span class="s7">,</span><span class="s1"> fullDate</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'2025/12/31'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>events</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e1'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'04:15'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'05:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'清大搭日豪客運 1250'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'transport'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'04:00發車'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'約1小時到二航'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e2'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'07:05'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'10:30'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'長榮 BR0170 起飛'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'transport'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'二航廈'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'機上補眠'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e3'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'12:30'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'13:30'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'午餐: BHC炸雞'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'food'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'東大門歷史公園8號出口'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'必點起司口味'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e4'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'14:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'17:30'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'南山塔 (首爾塔)'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'activity'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'明洞4號出口→南山纜車'</span><span class="s7">,</span><span class="s1"> ticket</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Klook領票'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'愛情鎖牆拍照、T4觀景台'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s5"> id</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'e5'</span><span class="s7">,</span><span class="s5"> start</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'18:00'</span><span class="s7">,</span><span class="s5"> end</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'18:30'</span><span class="s7">,</span><span class="s5"> title</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'明洞逛街 &amp; 換錢'</span><span class="s7">,</span><span class="s5"> type</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'shopping'</span><span class="s7">,</span><span class="s5"> transport</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'南山纜車下山'</span><span class="s7">,</span><span class="s5"> note</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'Kakao Friends、Money Box換錢'</span><span class="s5"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e6'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'18:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'19:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'晚餐: 荒謬的生肉'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'food'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'明洞6號出口'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'烤肉吃到飽'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e7'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'20:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'21:30'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'明洞亂打秀'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'activity'</span><span class="s7">,</span><span class="s1"> ticket</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'預約確認信'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'精彩打擊樂表演'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e8'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'22:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'23:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'回飯店休息'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'stay'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'東大門'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'充電、放戰利品'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e9'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'23:30'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'00:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'DDP 跨年燈光秀'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'activity'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'東大門1號出口'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'人多注意安全，新年快樂！'</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>day</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'01/01 (四)'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'韓服 &amp; 北村'</span><span class="s7">,</span><span class="s1"> shortTitle</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'D2 1/1'</span><span class="s7">,</span><span class="s1"> fullDate</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'2026/01/01'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>events</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e21'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'08:30'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'09:30'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'早餐: Isaac'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'food'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'東大門3號出口'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'排隊名店'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e22'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'10:30'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'12:30'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'西花韓服體驗'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'activity'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'景福宮4號出口'</span><span class="s7">,</span><span class="s1"> ticket</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Klook已訂'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'有台灣店員'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e23'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'12:30'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'14:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'景福宮'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'activity'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'穿韓服免門票'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'步行前往'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e24'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'14:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'16:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'北村韓屋村'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'activity'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'保持安靜'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'安國站'</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>day</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'01/02 (五)'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'南怡島一日遊'</span><span class="s7">,</span><span class="s1"> shortTitle</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'D3 1/2'</span><span class="s7">,</span><span class="s1"> fullDate</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'2026/01/02'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>events</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e31'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'11:10'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'11:20'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'一日遊集合'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'important'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'東大門10號出口'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'準時出發'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e32'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'13:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'16:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'南怡島'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'activity'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'冬季戀歌拍攝地'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e33'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'17:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'19:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'晨靜樹木園'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'activity'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'五色星光庭園展'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e34'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'22:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'23:59'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'SPAREX 汗蒸幕'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'activity'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Goodmorning City B3'</span><span class="s7">,</span><span class="s1"> ticket</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'₩15000'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'搓澡體驗'</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>day</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'01/03 (六)'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'廣藏 &amp; 樂天'</span><span class="s7">,</span><span class="s1"> shortTitle</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'D4 1/3'</span><span class="s7">,</span><span class="s1"> fullDate</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'2026/01/03'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>events</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e41'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'09:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'11:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'廣藏市場'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'food'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'鍾路五街8號出口'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'買棉被(128號)、吃綠豆煎餅'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e42'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'12:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'14:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'樂天免稅店'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'shopping'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'乙支路入口7號'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'買保養品'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e43'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'15:30'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'16:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'回飯店拿行李'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'transport'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'e44'</span><span class="s7">,</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'19:45'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'21:40'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'回程班機 BR0159'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'transport'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'仁川機場'</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'提早2小時到'</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">],</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span>categories</span><span class="s7">:</span><span class="s5"> </span><span class="s7">[</span><span class="s1">'飲食'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'交通'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'購物逛街'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'住宿'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'景點'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'門票'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'其他'</span><span class="s7">],</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span>catColors</span><span class="s7">:</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">'飲食'</span><span class="s7">:</span><span class="s1">'cat-food'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'交通'</span><span class="s7">:</span><span class="s1">'cat-trans'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'購物逛街'</span><span class="s7">:</span><span class="s1">'cat-shop'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'住宿'</span><span class="s7">:</span><span class="s1">'cat-stay'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'景點'</span><span class="s7">:</span><span class="s1">'cat-spot'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'門票'</span><span class="s7">:</span><span class="s1">'cat-ticket'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'其他'</span><span class="s7">:</span><span class="s1">'cat-other'</span><span class="s5"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>payers</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'公費'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'Lynn'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'Andy'</span><span class="s7">],</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span>payerColors</span><span class="s7">:</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">'公費'</span><span class="s7">:</span><span class="s1">'payer-public'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'Lynn'</span><span class="s7">:</span><span class="s1">'payer-lynn'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'Andy'</span><span class="s7">:</span><span class="s1">'payer-andy'</span><span class="s5"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>paymentMethods</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'現金'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'信用卡'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'行動支付'</span><span class="s7">],</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span>splitOptions</span><span class="s7">:</span><span class="s5"> </span><span class="s7">[</span><span class="s1">'平均分攤'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'不平均分攤'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'Andy 個人'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'Lynn 個人'</span><span class="s7">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">};</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> app </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'app'</span><span class="s7">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> getInitialDay</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> todayStr </span><span class="s7">=</span><span class="s1"> </span><span class="s10">new</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">().</span><span class="s1">toISOString</span><span class="s7">().</span><span class="s1">slice</span><span class="s7">(</span><span class="s12">0</span><span class="s7">,</span><span class="s1"> </span><span class="s12">10</span><span class="s7">).</span><span class="s1">replace</span><span class="s7">(</span><span class="s14">/-/</span><span class="s10">g</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'/'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> idx </span><span class="s7">=</span><span class="s1"> staticData</span><span class="s7">.</span><span class="s1">itinerary</span><span class="s7">.</span><span class="s1">findIndex</span><span class="s7">(</span><span class="s1">day </span><span class="s7">=&gt;</span><span class="s1"> day</span><span class="s7">.</span><span class="s1">fullDate </span><span class="s7">===</span><span class="s1"> todayStr</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">return</span><span class="s1"> idx </span><span class="s7">!==</span><span class="s1"> </span><span class="s7">-</span><span class="s12">1</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> idx </span><span class="s7">:</span><span class="s1"> </span><span class="s12">0</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">let</span><span class="s1"> savedItinerary </span><span class="s7">=</span><span class="s1"> </span><span class="s13">JSON</span><span class="s7">.</span><span class="s1">parse</span><span class="s7">(</span><span class="s1">localStorage</span><span class="s7">.</span><span class="s1">getItem</span><span class="s7">(</span><span class="s8">'seoul_itinerary_v15'</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">savedItinerary</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> savedItinerary </span><span class="s7">=</span><span class="s1"> staticData</span><span class="s7">.</span><span class="s1">itinerary</span><span class="s7">;</span><span class="s1"> localStorage</span><span class="s7">.</span><span class="s1">setItem</span><span class="s7">(</span><span class="s8">'seoul_itinerary_v15'</span><span class="s7">,</span><span class="s1"> </span><span class="s13">JSON</span><span class="s7">.</span><span class="s1">stringify</span><span class="s7">(</span><span class="s1">savedItinerary</span><span class="s7">));</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">let</span><span class="s1"> state </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>activeTab</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'plan'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>activeDay</span><span class="s7">:</span><span class="s1"> getInitialDay</span><span class="s7">(),</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>walletDay</span><span class="s7">:</span><span class="s1"> getInitialDay</span><span class="s7">(),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>expenseCurrency</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'KRW'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>itinerary</span><span class="s7">:</span><span class="s1"> savedItinerary</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>expenses</span><span class="s7">:</span><span class="s1"> </span><span class="s13">JSON</span><span class="s7">.</span><span class="s1">parse</span><span class="s7">(</span><span class="s1">localStorage</span><span class="s7">.</span><span class="s1">getItem</span><span class="s7">(</span><span class="s8">'seoul_expenses_v4'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s7">[],</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>checklist</span><span class="s7">:</span><span class="s1"> </span><span class="s13">JSON</span><span class="s7">.</span><span class="s1">parse</span><span class="s7">(</span><span class="s1">localStorage</span><span class="s7">.</span><span class="s1">getItem</span><span class="s7">(</span><span class="s8">'seoul_checklist_v3'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s7">[],</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>memos</span><span class="s7">:</span><span class="s1"> localStorage</span><span class="s7">.</span><span class="s1">getItem</span><span class="s7">(</span><span class="s8">'seoul_memos'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s8">''</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>exchangeRate</span><span class="s7">:</span><span class="s1"> parseFloat</span><span class="s7">(</span><span class="s1">localStorage</span><span class="s7">.</span><span class="s1">getItem</span><span class="s7">(</span><span class="s8">'seoul_rate'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> config</span><span class="s7">.</span><span class="s1">currencyRate</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>editingId</span><span class="s7">:</span><span class="s1"> </span><span class="s10">null</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>expandedEvents</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[]</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">};</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">if</span><span class="s7">(</span><span class="s1">state</span><span class="s7">.</span><span class="s1">checklist</span><span class="s7">.</span><span class="s1">length </span><span class="s7">===</span><span class="s1"> </span><span class="s12">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">             </span></span><span class="s10">const</span><span class="s1"> groups </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">{</span><span class="s1"> category</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'3C 產品'</span><span class="s7">,</span><span class="s1"> items</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'手機'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'充電線'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'充電器'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'相機'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'萬用轉接頭'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'行動電源'</span><span class="s7">]</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">{</span><span class="s1"> category</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'衣物'</span><span class="s7">,</span><span class="s1"> items</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'上衣'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'褲子'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'外套'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'鞋子'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'內衣褲'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'墨鏡'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'帽子'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'圍巾'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'手套'</span><span class="s7">]</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s7">{</span><span class="s5"> category</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'盥洗及衛生用品'</span><span class="s7">,</span><span class="s5"> items</span><span class="s7">:</span><span class="s5"> </span><span class="s7">[</span><span class="s1">'卸妝巾'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'洗面乳'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'牙膏'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'牙刷'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'牙線'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'毛巾'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'濕紙巾'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'面紙'</span><span class="s7">]</span><span class="s5"> </span><span class="s7">},</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s7">{</span><span class="s5"> category</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'個人藥品'</span><span class="s7">,</span><span class="s5"> items</span><span class="s7">:</span><span class="s5"> </span><span class="s7">[</span><span class="s1">'暈車藥'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'過敏藥'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'消毒用品'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'感冒藥'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'OK 繃'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'蚊蟲止癢藥'</span><span class="s7">]</span><span class="s5"> </span><span class="s7">},</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s7">{</span><span class="s5"> category</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'重要文件'</span><span class="s7">,</span><span class="s5"> items</span><span class="s7">:</span><span class="s5"> </span><span class="s7">[</span><span class="s1">'身分證'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'護照'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'國際駕照'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'登機證或機票'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'住宿或交通票卷等預購票券'</span><span class="s7">]</span><span class="s5"> </span><span class="s7">},</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s7">{</span><span class="s5"> category</span><span class="s7">:</span><span class="s5"> </span><span class="s1">'其他用品'</span><span class="s7">,</span><span class="s5"> items</span><span class="s7">:</span><span class="s5"> </span><span class="s7">[</span><span class="s1">'空水壺或環保杯'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'家中鑰匙'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'眼罩'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'外幣現金或信用卡'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'耳塞'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'頸枕'</span><span class="s7">]</span><span class="s5"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>groups</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">g </span><span class="s7">=&gt;</span><span class="s1"> g</span><span class="s7">.</span><span class="s1">items</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">i </span><span class="s7">=&gt;</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">checklist</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1">category</span><span class="s7">:</span><span class="s1">g</span><span class="s7">.</span><span class="s1">category</span><span class="s7">,</span><span class="s1"> text</span><span class="s7">:</span><span class="s1">i</span><span class="s7">,</span><span class="s1"> checked</span><span class="s7">:</span><span class="s10">false</span><span class="s7">})));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> saveToLS</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>localStorage</span><span class="s7">.</span><span class="s1">setItem</span><span class="s7">(</span><span class="s8">'seoul_expenses_v4'</span><span class="s7">,</span><span class="s1"> </span><span class="s13">JSON</span><span class="s7">.</span><span class="s1">stringify</span><span class="s7">(</span><span class="s1">state</span><span class="s7">.</span><span class="s1">expenses</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>localStorage</span><span class="s7">.</span><span class="s1">setItem</span><span class="s7">(</span><span class="s8">'seoul_itinerary_v15'</span><span class="s7">,</span><span class="s1"> </span><span class="s13">JSON</span><span class="s7">.</span><span class="s1">stringify</span><span class="s7">(</span><span class="s1">state</span><span class="s7">.</span><span class="s1">itinerary</span><span class="s7">));</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>localStorage</span><span class="s7">.</span><span class="s1">setItem</span><span class="s7">(</span><span class="s8">'seoul_checklist_v3'</span><span class="s7">,</span><span class="s1"> </span><span class="s13">JSON</span><span class="s7">.</span><span class="s1">stringify</span><span class="s7">(</span><span class="s1">state</span><span class="s7">.</span><span class="s1">checklist</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>localStorage</span><span class="s7">.</span><span class="s1">setItem</span><span class="s7">(</span><span class="s8">'seoul_memos'</span><span class="s7">,</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">memos</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>localStorage</span><span class="s7">.</span><span class="s1">setItem</span><span class="s7">(</span><span class="s8">'seoul_rate'</span><span class="s7">,</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">exchangeRate</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> formatMoney</span><span class="s7">(</span><span class="s1">amount</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">return</span><span class="s1"> parseFloat</span><span class="s7">(</span><span class="s1">amount</span><span class="s7">).</span><span class="s1">toLocaleString</span><span class="s7">(</span><span class="s8">'en-US'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> minimumFractionDigits</span><span class="s7">:</span><span class="s1"> </span><span class="s12">0</span><span class="s7">,</span><span class="s1"> maximumFractionDigits</span><span class="s7">:</span><span class="s1"> </span><span class="s12">0</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> generateId</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">return</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">.</span><span class="s1">now</span><span class="s7">().</span><span class="s1">toString</span><span class="s7">(</span><span class="s12">36</span><span class="s7">)</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">().</span><span class="s1">toString</span><span class="s7">(</span><span class="s12">36</span><span class="s7">).</span><span class="s1">substr</span><span class="s7">(</span><span class="s12">2</span><span class="s7">);</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> safeCalculate</span><span class="s7">(</span><span class="s1">exp</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">try</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s14">/[^0-9+\-*/.()%]/</span><span class="s7">.</span><span class="s1">test</span><span class="s7">(</span><span class="s1">exp</span><span class="s7">))</span><span class="s1"> </span><span class="s10">return</span><span class="s1"> </span><span class="s10">null</span><span class="s7">;</span><span class="s1"> </span><span class="s10">return</span><span class="s1"> </span><span class="s13">Function</span><span class="s7">(</span><span class="s8">'"use strict";return ('</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> exp </span><span class="s7">+</span><span class="s1"> </span><span class="s8">')'</span><span class="s7">)();</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s10">catch</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">return</span><span class="s1"> </span><span class="s10">null</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> compressImage</span><span class="s7">(</span><span class="s1">file</span><span class="s7">,</span><span class="s1"> cb</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> reader </span><span class="s7">=</span><span class="s1"> </span><span class="s10">new</span><span class="s1"> </span><span class="s13">FileReader</span><span class="s7">();</span><span class="s1"> reader</span><span class="s7">.</span><span class="s1">readAsDataURL</span><span class="s7">(</span><span class="s1">file</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>reader</span><span class="s7">.</span><span class="s1">onload </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> img </span><span class="s7">=</span><span class="s1"> </span><span class="s10">new</span><span class="s1"> </span><span class="s13">Image</span><span class="s7">();</span><span class="s1"> img</span><span class="s7">.</span><span class="s1">src </span><span class="s7">=</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">target</span><span class="s7">.</span><span class="s1">result</span><span class="s7">;</span><span class="s1"> img</span><span class="s7">.</span><span class="s1">onload </span><span class="s7">=</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> cvs </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'canvas'</span><span class="s7">);</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> w </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">min</span><span class="s7">(</span><span class="s1">img</span><span class="s7">.</span><span class="s1">width</span><span class="s7">,</span><span class="s1"> </span><span class="s12">600</span><span class="s7">);</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> h </span><span class="s7">=</span><span class="s1"> img</span><span class="s7">.</span><span class="s1">height </span><span class="s7">*</span><span class="s1"> </span><span class="s7">(</span><span class="s1">w</span><span class="s7">/</span><span class="s1">img</span><span class="s7">.</span><span class="s1">width</span><span class="s7">);</span><span class="s1"> cvs</span><span class="s7">.</span><span class="s1">width</span><span class="s7">=</span><span class="s1">w</span><span class="s7">;</span><span class="s1"> cvs</span><span class="s7">.</span><span class="s1">height</span><span class="s7">=</span><span class="s1">h</span><span class="s7">;</span><span class="s1"> cvs</span><span class="s7">.</span><span class="s1">getContext</span><span class="s7">(</span><span class="s8">'2d'</span><span class="s7">).</span><span class="s1">drawImage</span><span class="s7">(</span><span class="s1">img</span><span class="s7">,</span><span class="s12">0</span><span class="s7">,</span><span class="s12">0</span><span class="s7">,</span><span class="s1">w</span><span class="s7">,</span><span class="s1">h</span><span class="s7">);</span><span class="s1"> cb</span><span class="s7">(</span><span class="s1">cvs</span><span class="s7">.</span><span class="s1">toDataURL</span><span class="s7">(</span><span class="s8">'image/jpeg'</span><span class="s7">,</span><span class="s1"> </span><span class="s12">0.6</span><span class="s7">));</span><span class="s1"> </span><span class="s7">}};</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> calculateDuration</span><span class="s7">(</span><span class="s1">start</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">start </span><span class="s7">||</span><span class="s1"> </span><span class="s7">!</span><span class="s1">end</span><span class="s7">)</span><span class="s1"> </span><span class="s10">return</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> </span><span class="s7">[</span><span class="s1">h1</span><span class="s7">,</span><span class="s1"> m1</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> start</span><span class="s7">.</span><span class="s1">split</span><span class="s7">(</span><span class="s8">':'</span><span class="s7">).</span><span class="s1">map</span><span class="s7">(</span><span class="s13">Number</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> </span><span class="s7">[</span><span class="s1">h2</span><span class="s7">,</span><span class="s1"> m2</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> end</span><span class="s7">.</span><span class="s1">split</span><span class="s7">(</span><span class="s8">':'</span><span class="s7">).</span><span class="s1">map</span><span class="s7">(</span><span class="s13">Number</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s1"> diff </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">h2 </span><span class="s7">*</span><span class="s1"> </span><span class="s12">60</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> m2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">-</span><span class="s1"> </span><span class="s7">(</span><span class="s1">h1 </span><span class="s7">*</span><span class="s1"> </span><span class="s12">60</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> m1</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">diff </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s12">0</span><span class="s7">)</span><span class="s1"> diff </span><span class="s7">+=</span><span class="s1"> </span><span class="s12">24</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s12">60</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> h </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s1">diff </span><span class="s7">/</span><span class="s1"> </span><span class="s12">60</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> m </span><span class="s7">=</span><span class="s1"> diff </span><span class="s7">%</span><span class="s1"> </span><span class="s12">60</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">h </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s12">0</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> m </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s12">0</span><span class="s7">)</span><span class="s1"> </span><span class="s10">return</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">h</span><span class="s7">}</span><span class="s8">h</span><span class="s7">${</span><span class="s1">m</span><span class="s7">}</span><span class="s8">m`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">h </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s12">0</span><span class="s7">)</span><span class="s1"> </span><span class="s10">return</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">h</span><span class="s7">}</span><span class="s8">h`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">return</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">m</span><span class="s7">}</span><span class="s8">m`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">let</span><span class="s1"> dragSrcEl </span><span class="s7">=</span><span class="s1"> </span><span class="s10">null</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> handleDragStart</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> dragSrcEl </span><span class="s7">=</span><span class="s1"> </span><span class="s10">this</span><span class="s7">.</span><span class="s1">closest</span><span class="s7">(</span><span class="s8">'.draggable-item'</span><span class="s7">);</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">dataTransfer</span><span class="s7">.</span><span class="s1">effectAllowed </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'move'</span><span class="s7">;</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">dataTransfer</span><span class="s7">.</span><span class="s1">setData</span><span class="s7">(</span><span class="s8">'text/html'</span><span class="s7">,</span><span class="s1"> </span><span class="s10">this</span><span class="s7">.</span><span class="s1">innerHTML</span><span class="s7">);</span><span class="s1"> dragSrcEl</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'dragging'</span><span class="s7">);</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> handleDragOver</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">.</span><span class="s1">preventDefault</span><span class="s7">)</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">preventDefault</span><span class="s7">();</span><span class="s1"> </span><span class="s10">return</span><span class="s1"> </span><span class="s10">false</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> handleDragEnter</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">this</span><span class="s7">.</span><span class="s1">closest</span><span class="s7">(</span><span class="s8">'.draggable-item'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'bg-gray-50'</span><span class="s7">);</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> handleDragLeave</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">this</span><span class="s7">.</span><span class="s1">closest</span><span class="s7">(</span><span class="s8">'.draggable-item'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'bg-gray-50'</span><span class="s7">);</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> handleDrop</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">.</span><span class="s1">stopPropagation</span><span class="s7">)</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">stopPropagation</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> destItem </span><span class="s7">=</span><span class="s1"> </span><span class="s10">this</span><span class="s7">.</span><span class="s1">closest</span><span class="s7">(</span><span class="s8">'.draggable-item'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">dragSrcEl </span><span class="s7">!==</span><span class="s1"> destItem</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> srcIdx </span><span class="s7">=</span><span class="s1"> parseInt</span><span class="s7">(</span><span class="s1">dragSrcEl</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">index</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> destIdx </span><span class="s7">=</span><span class="s1"> parseInt</span><span class="s7">(</span><span class="s1">destItem</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">index</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> dayEvents </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">itinerary</span><span class="s7">[</span><span class="s1">state</span><span class="s7">.</span><span class="s1">activeDay</span><span class="s7">].</span><span class="s1">events</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> </span><span class="s7">[</span><span class="s1">movedItem</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> dayEvents</span><span class="s7">.</span><span class="s1">splice</span><span class="s7">(</span><span class="s1">srcIdx</span><span class="s7">,</span><span class="s1"> </span><span class="s12">1</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>dayEvents</span><span class="s7">.</span><span class="s1">splice</span><span class="s7">(</span><span class="s1">destIdx</span><span class="s7">,</span><span class="s1"> </span><span class="s12">0</span><span class="s7">,</span><span class="s1"> movedItem</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>saveToLS</span><span class="s7">();</span><span class="s1"> renderPlan</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">return</span><span class="s1"> </span><span class="s10">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> handleDragEnd</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">this</span><span class="s7">.</span><span class="s1">closest</span><span class="s7">(</span><span class="s8">'.draggable-item'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'dragging'</span><span class="s7">);</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">querySelectorAll</span><span class="s7">(</span><span class="s8">'.draggable-item'</span><span class="s7">).</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">col </span><span class="s7">=&gt;</span><span class="s1"> col</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'bg-gray-50'</span><span class="s7">));</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> toggleEventExpand</span><span class="s7">(</span><span class="s1">evtId</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> idx </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expandedEvents</span><span class="s7">.</span><span class="s1">indexOf</span><span class="s7">(</span><span class="s1">evtId</span><span class="s7">);</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">idx </span><span class="s7">!==</span><span class="s1"> </span><span class="s7">-</span><span class="s12">1</span><span class="s7">)</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expandedEvents</span><span class="s7">.</span><span class="s1">splice</span><span class="s7">(</span><span class="s1">idx</span><span class="s7">,</span><span class="s1"> </span><span class="s12">1</span><span class="s7">);</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expandedEvents</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">evtId</span><span class="s7">);</span><span class="s1"> renderPlan</span><span class="s7">();</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> saveEventInline</span><span class="s7">(</span><span class="s1">evtId</span><span class="s7">,</span><span class="s1"> field</span><span class="s7">,</span><span class="s1"> value</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> dayEvents </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">itinerary</span><span class="s7">[</span><span class="s1">state</span><span class="s7">.</span><span class="s1">activeDay</span><span class="s7">].</span><span class="s1">events</span><span class="s7">;</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> evt </span><span class="s7">=</span><span class="s1"> dayEvents</span><span class="s7">.</span><span class="s1">find</span><span class="s7">(</span><span class="s1">e </span><span class="s7">=&gt;</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">id </span><span class="s7">===</span><span class="s1"> evtId</span><span class="s7">);</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">evt</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> evt</span><span class="s7">[</span><span class="s1">field</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> value</span><span class="s7">;</span><span class="s1"> saveToLS</span><span class="s7">();</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">field </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'start'</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> field </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'end'</span><span class="s7">)</span><span class="s1"> renderPlan</span><span class="s7">();</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> addNewEvent</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> newEvt </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> generateId</span><span class="s7">(),</span><span class="s1"> start</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'12:00'</span><span class="s7">,</span><span class="s1"> end</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'13:00'</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'新行程'</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'activity'</span><span class="s7">,</span><span class="s1"> transport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">,</span><span class="s1"> ticket</span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">,</span><span class="s1"> note</span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s1"> </span><span class="s7">};</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">itinerary</span><span class="s7">[</span><span class="s1">state</span><span class="s7">.</span><span class="s1">activeDay</span><span class="s7">].</span><span class="s1">events</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">newEvt</span><span class="s7">);</span><span class="s1"> saveToLS</span><span class="s7">();</span><span class="s1"> renderPlan</span><span class="s7">();</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> moveEvent</span><span class="s7">(</span><span class="s1">evtId</span><span class="s7">,</span><span class="s1"> dir</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> dayEvents </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">itinerary</span><span class="s7">[</span><span class="s1">state</span><span class="s7">.</span><span class="s1">activeDay</span><span class="s7">].</span><span class="s1">events</span><span class="s7">;</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> idx </span><span class="s7">=</span><span class="s1"> dayEvents</span><span class="s7">.</span><span class="s1">findIndex</span><span class="s7">(</span><span class="s1">e </span><span class="s7">=&gt;</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">id </span><span class="s7">===</span><span class="s1"> evtId</span><span class="s7">);</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">idx </span><span class="s7">===</span><span class="s1"> </span><span class="s7">-</span><span class="s12">1</span><span class="s7">)</span><span class="s1"> </span><span class="s10">return</span><span class="s7">;</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">dir </span><span class="s7">===</span><span class="s1"> </span><span class="s7">-</span><span class="s12">1</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> idx </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s12">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s7">[</span><span class="s1">dayEvents</span><span class="s7">[</span><span class="s1">idx</span><span class="s7">],</span><span class="s1"> dayEvents</span><span class="s7">[</span><span class="s1">idx</span><span class="s7">-</span><span class="s12">1</span><span class="s7">]]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span><span class="s1">dayEvents</span><span class="s7">[</span><span class="s1">idx</span><span class="s7">-</span><span class="s12">1</span><span class="s7">],</span><span class="s1"> dayEvents</span><span class="s7">[</span><span class="s1">idx</span><span class="s7">]];</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">dir </span><span class="s7">===</span><span class="s1"> </span><span class="s12">1</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> idx </span><span class="s7">&lt;</span><span class="s1"> dayEvents</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> </span><span class="s12">1</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s7">[</span><span class="s1">dayEvents</span><span class="s7">[</span><span class="s1">idx</span><span class="s7">],</span><span class="s1"> dayEvents</span><span class="s7">[</span><span class="s1">idx</span><span class="s7">+</span><span class="s12">1</span><span class="s7">]]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span><span class="s1">dayEvents</span><span class="s7">[</span><span class="s1">idx</span><span class="s7">+</span><span class="s12">1</span><span class="s7">],</span><span class="s1"> dayEvents</span><span class="s7">[</span><span class="s1">idx</span><span class="s7">]];</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> saveToLS</span><span class="s7">();</span><span class="s1"> renderPlan</span><span class="s7">();</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> deleteEvent</span><span class="s7">(</span><span class="s1">evtId</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(!</span><span class="s1">confirm</span><span class="s7">(</span><span class="s8">'刪除此行程？'</span><span class="s7">))</span><span class="s1"> </span><span class="s10">return</span><span class="s7">;</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> dayEvents </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">itinerary</span><span class="s7">[</span><span class="s1">state</span><span class="s7">.</span><span class="s1">activeDay</span><span class="s7">].</span><span class="s1">events</span><span class="s7">;</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> idx </span><span class="s7">=</span><span class="s1"> dayEvents</span><span class="s7">.</span><span class="s1">findIndex</span><span class="s7">(</span><span class="s1">e </span><span class="s7">=&gt;</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">id </span><span class="s7">===</span><span class="s1"> evtId</span><span class="s7">);</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">idx </span><span class="s7">!==</span><span class="s1"> </span><span class="s7">-</span><span class="s12">1</span><span class="s7">)</span><span class="s1"> dayEvents</span><span class="s7">.</span><span class="s1">splice</span><span class="s7">(</span><span class="s1">idx</span><span class="s7">,</span><span class="s1"> </span><span class="s12">1</span><span class="s7">);</span><span class="s1"> saveToLS</span><span class="s7">();</span><span class="s1"> renderPlan</span><span class="s7">();</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> renderPlan</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> day </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">itinerary</span><span class="s7">[</span><span class="s1">state</span><span class="s7">.</span><span class="s1">activeDay</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s1"> html </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="sticky top-14 bg-[#FDFCF8] z-20 pb-2 pt-1 flex justify-between gap-2 overflow-x-auto no-scrollbar mb-4"&gt;</span></p>
<p class="p4"><span class="s8"><span class="Apple-converted-space">                    </span></span><span class="s7">${</span><span class="s1">state</span><span class="s7">.</span><span class="s1">itinerary</span><span class="s7">.</span><span class="s1">map</span><span class="s7">((</span><span class="s1">d</span><span class="s7">,</span><span class="s1"> i</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button onclick="state.activeDay=</span><span class="s7">${</span><span class="s5">i</span><span class="s7">}</span><span class="s1">;renderPlan()" class="flex-1 py-2 px-1 text-sm rounded-lg transition-all whitespace-nowrap </span><span class="s7">${</span><span class="s5">i </span><span class="s7">===</span><span class="s5"> state</span><span class="s7">.</span><span class="s5">activeDay </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'tab-active'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">'tab-inactive text-gray-400'</span><span class="s7">}</span><span class="s1">"&gt;</span><span class="s7">${</span><span class="s5">d</span><span class="s7">.</span><span class="s5">shortTitle</span><span class="s7">}</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>`</span><span class="s7">).</span><span class="s5">join</span><span class="s7">(</span><span class="s1">''</span><span class="s7">)}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="fade-in pb-20 px-2"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-end mb-4 border-b border-gray-200 pb-2"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h2 class="text-2xl font-bold text-app-text mr-3"&gt;</span><span class="s7">${</span><span class="s5">day</span><span class="s7">.</span><span class="s5">day</span><span class="s7">.</span><span class="s5">split</span><span class="s7">(</span><span class="s1">' '</span><span class="s7">)[</span><span class="s12">0</span><span class="s7">]}</span><span class="s1">&lt;/h2&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;span class="text-xs text-white bg-app-accent px-3 py-1 rounded-full shadow-sm"&gt;</span><span class="s7">${</span><span class="s5">day</span><span class="s7">.</span><span class="s5">title</span><span class="s7">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="space-y-6" id="planList"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span>`</span><span class="s7">;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>day</span><span class="s7">.</span><span class="s1">events</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">((</span><span class="s1">event</span><span class="s7">,</span><span class="s1"> index</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> isExpanded </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expandedEvents</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s1">event</span><span class="s7">.</span><span class="s1">id</span><span class="s7">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s5"> highlightClass </span><span class="s7">=</span><span class="s5"> event</span><span class="s7">.</span><span class="s5">type </span><span class="s7">===</span><span class="s5"> </span><span class="s1">'important'</span><span class="s5"> </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'border-l-4 border-l-yellow-400 bg-yellow-50'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">'bg-white'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> duration </span><span class="s7">=</span><span class="s1"> calculateDuration</span><span class="s7">(</span><span class="s1">event</span><span class="s7">.</span><span class="s1">start</span><span class="s7">,</span><span class="s1"> event</span><span class="s7">.</span><span class="s1">end</span><span class="s7">);</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>html </span><span class="s7">+=</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex gap-4 relative group"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="w-12 flex-shrink-0 text-right pt-2 font-mono text-xs font-bold text-gray-500 leading-tight"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div&gt;</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">start</span><span class="s7">}</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="h-6 border-r border-gray-300 mr-2 my-1"&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="text-gray-400"&gt;</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">end</span><span class="s7">}</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex-1 draggable-item relative rounded-xl shadow-sm border border-gray-100 p-3 </span><span class="s7">${</span><span class="s5">highlightClass</span><span class="s7">}</span><span class="s1"> transition" data-index="</span><span class="s7">${</span><span class="s5">index</span><span class="s7">}</span><span class="s1">"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="flex items-start gap-3 cursor-pointer" onclick="toggleEventExpand('</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">')"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="flex-1"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span></span><span class="s7">${</span><span class="s5">duration </span><span class="s7">?</span><span class="s5"> </span><span class="s1">`&lt;span class="text-[10px] text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full mb-1 inline-block"&gt;&lt;i class="fa-regular fa-clock mr-1"&gt;&lt;/i&gt;</span><span class="s7">${</span><span class="s5">duration</span><span class="s7">}</span><span class="s1">&lt;/span&gt;`</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">''</span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;input type="text" class="w-full font-bold text-gray-700 text-base outline-none bg-transparent" value="</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">title</span><span class="s7">}</span><span class="s1">" onclick="event.stopPropagation()" onchange="saveEventInline('</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">', 'title', this.value)"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="drag-handle text-gray-300 p-2" draggable="true" onclick="event.stopPropagation()"&gt;&lt;i class="fa-solid fa-bars"&gt;&lt;/i&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="text-gray-300 p-2 plan-arrow </span><span class="s7">${</span><span class="s5">isExpanded</span><span class="s7">?</span><span class="s1">'expanded'</span><span class="s7">:</span><span class="s1">''</span><span class="s7">}</span><span class="s1">" &gt;&lt;i class="fa-solid fa-chevron-down"&gt;&lt;/i&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="plan-detail </span><span class="s7">${</span><span class="s5">isExpanded</span><span class="s7">?</span><span class="s1">'expanded'</span><span class="s7">:</span><span class="s1">''</span><span class="s7">}</span><span class="s1">"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="mt-3 space-y-3 border-t pt-3"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;div class="flex items-center gap-2 text-xs text-gray-400 bg-gray-50 p-2 rounded"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;span&gt;修改時間:&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;input type="time" class="bg-white border rounded p-1" value="</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">start</span><span class="s7">}</span><span class="s1">" onchange="saveEventInline('</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">', 'start', this.value)"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;span&gt;-&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;input type="time" class="bg-white border rounded p-1" value="</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">end</span><span class="s7">}</span><span class="s1">" onchange="saveEventInline('</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">', 'end', this.value)"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;div class="bg-plan-transport p-3 rounded-lg border border-blue-50"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;div class="text-[10px] font-bold text-blue-400 mb-1 uppercase tracking-wider"&gt;&lt;i class="fa-solid fa-train-subway mr-1"&gt;&lt;/i&gt;交通方式&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;textarea rows="1" class="w-full bg-transparent text-sm outline-none resize-none text-gray-600" placeholder="輸入交通資訊..." onchange="saveEventInline('</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">', 'transport', this.value)"&gt;</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">transport </span><span class="s7">||</span><span class="s5"> </span><span class="s1">''</span><span class="s7">}</span><span class="s1">&lt;/textarea&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;div class="bg-plan-ticket p-3 rounded-lg border border-yellow-50"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;div class="text-[10px] font-bold text-amber-500 mb-1 uppercase tracking-wider"&gt;&lt;i class="fa-solid fa-ticket mr-1"&gt;&lt;/i&gt;營業時間/門票&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;textarea rows="1" class="w-full bg-transparent text-sm outline-none resize-none text-gray-600" placeholder="輸入門票資訊..." onchange="saveEventInline('</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">', 'ticket', this.value)"&gt;</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">ticket </span><span class="s7">||</span><span class="s5"> </span><span class="s1">''</span><span class="s7">}</span><span class="s1">&lt;/textarea&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;div class="bg-plan-note p-3 rounded-lg border border-purple-50"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;div class="text-[10px] font-bold text-purple-400 mb-1 uppercase tracking-wider"&gt;&lt;i class="fa-solid fa-note-sticky mr-1"&gt;&lt;/i&gt;備註 (必做/攝影)&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;textarea rows="2" class="w-full bg-transparent text-sm outline-none resize-none text-gray-600" placeholder="輸入備註..." onchange="saveEventInline('</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">', 'note', this.value)"&gt;</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">note </span><span class="s7">||</span><span class="s5"> </span><span class="s1">''</span><span class="s7">}</span><span class="s1">&lt;/textarea&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;div class="flex justify-end gap-2 mt-2"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;button onclick="moveEvent('</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">', -1)" class="text-xs bg-gray-100 px-2 py-1 rounded hover:bg-gray-200 text-gray-500"&gt;⬆ 上移&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;button onclick="moveEvent('</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">', 1)" class="text-xs bg-gray-100 px-2 py-1 rounded hover:bg-gray-200 text-gray-500"&gt;⬇ 下移&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;button onclick="deleteEvent('</span><span class="s7">${</span><span class="s5">event</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">')" class="text-xs bg-red-50 px-2 py-1 rounded hover:bg-red-100 text-danger"&gt;刪除&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>html </span><span class="s7">+=</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button onclick="addNewEvent()" class="w-full py-3 rounded-xl border-2 border-dashed border-app-accent text-app-accent font-bold hover:bg-app-soft transition flex items-center justify-center gap-2"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;i class="fa-solid fa-plus"&gt;&lt;/i&gt; 新增行程</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span>`</span><span class="s7">;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>html </span><span class="s7">+=</span><span class="s1"> </span><span class="s8">`&lt;/div&gt;&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>app</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> html</span><span class="s7">;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> handles </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">querySelectorAll</span><span class="s7">(</span><span class="s8">'.drag-handle'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>handles</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">handle </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> handle</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'dragstart'</span><span class="s7">,</span><span class="s1"> handleDragStart</span><span class="s7">,</span><span class="s1"> </span><span class="s10">false</span><span class="s7">);</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> items </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">querySelectorAll</span><span class="s7">(</span><span class="s8">'.draggable-item'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>items</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">item </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>item</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'dragenter'</span><span class="s7">,</span><span class="s1"> handleDragEnter</span><span class="s7">,</span><span class="s1"> </span><span class="s10">false</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>item</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'dragover'</span><span class="s7">,</span><span class="s1"> handleDragOver</span><span class="s7">,</span><span class="s1"> </span><span class="s10">false</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>item</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'dragleave'</span><span class="s7">,</span><span class="s1"> handleDragLeave</span><span class="s7">,</span><span class="s1"> </span><span class="s10">false</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>item</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'drop'</span><span class="s7">,</span><span class="s1"> handleDrop</span><span class="s7">,</span><span class="s1"> </span><span class="s10">false</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>item</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'dragend'</span><span class="s7">,</span><span class="s1"> handleDragEnd</span><span class="s7">,</span><span class="s1"> </span><span class="s10">false</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> renderWallet</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s1"> summary </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> andy</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> paid</span><span class="s7">:</span><span class="s1"> </span><span class="s12">0</span><span class="s7">,</span><span class="s1"> cost</span><span class="s7">:</span><span class="s1"> </span><span class="s12">0</span><span class="s1"> </span><span class="s7">},</span><span class="s1"> lynn</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> paid</span><span class="s7">:</span><span class="s1"> </span><span class="s12">0</span><span class="s7">,</span><span class="s1"> cost</span><span class="s7">:</span><span class="s1"> </span><span class="s12">0</span><span class="s1"> </span><span class="s7">},</span><span class="s1"> publicPaid</span><span class="s7">:</span><span class="s1"> </span><span class="s12">0</span><span class="s1"> </span><span class="s7">};</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>state</span><span class="s7">.</span><span class="s1">expenses</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">ex </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">let</span><span class="s1"> amtKRW </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">currency </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'TWD'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">amount </span><span class="s7">/</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">exchangeRate </span><span class="s7">:</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">amount</span><span class="s7">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ex</span><span class="s7">.</span><span class="s1">payer </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'Andy'</span><span class="s7">)</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">andy</span><span class="s7">.</span><span class="s1">paid </span><span class="s7">+=</span><span class="s1"> amtKRW</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ex</span><span class="s7">.</span><span class="s1">payer </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'Lynn'</span><span class="s7">)</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">lynn</span><span class="s7">.</span><span class="s1">paid </span><span class="s7">+=</span><span class="s1"> amtKRW</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ex</span><span class="s7">.</span><span class="s1">payer </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'公費'</span><span class="s7">)</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">publicPaid </span><span class="s7">+=</span><span class="s1"> amtKRW</span><span class="s7">;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ex</span><span class="s7">.</span><span class="s1">split </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'平均分攤'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">andy</span><span class="s7">.</span><span class="s1">cost </span><span class="s7">+=</span><span class="s1"> amtKRW </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">;</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">lynn</span><span class="s7">.</span><span class="s1">cost </span><span class="s7">+=</span><span class="s1"> amtKRW </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ex</span><span class="s7">.</span><span class="s1">split </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'Andy 個人'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">andy</span><span class="s7">.</span><span class="s1">cost </span><span class="s7">+=</span><span class="s1"> amtKRW</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ex</span><span class="s7">.</span><span class="s1">split </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'Lynn 個人'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">lynn</span><span class="s7">.</span><span class="s1">cost </span><span class="s7">+=</span><span class="s1"> amtKRW</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ex</span><span class="s7">.</span><span class="s1">split </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'不平均分攤'</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">customSplit</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">let</span><span class="s1"> sA </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">currency </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'TWD'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">customSplit</span><span class="s7">.</span><span class="s1">andy </span><span class="s7">/</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">exchangeRate </span><span class="s7">:</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">customSplit</span><span class="s7">.</span><span class="s1">andy</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">let</span><span class="s1"> sL </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">currency </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'TWD'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">customSplit</span><span class="s7">.</span><span class="s1">lynn </span><span class="s7">/</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">exchangeRate </span><span class="s7">:</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">customSplit</span><span class="s7">.</span><span class="s1">lynn</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>summary</span><span class="s7">.</span><span class="s1">andy</span><span class="s7">.</span><span class="s1">cost </span><span class="s7">+=</span><span class="s1"> sA</span><span class="s7">;</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">lynn</span><span class="s7">.</span><span class="s1">cost </span><span class="s7">+=</span><span class="s1"> sL</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> andyNet </span><span class="s7">=</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">andy</span><span class="s7">.</span><span class="s1">paid </span><span class="s7">-</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">andy</span><span class="s7">.</span><span class="s1">cost</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> settlementText </span><span class="s7">=</span><span class="s1"> andyNet </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s12">0</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s7">?</span><span class="s5"> </span><span class="s1">`Lynn 需給 Andy &lt;span class="text-app-accent font-bold"&gt;₩</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">andyNet</span><span class="s7">)}</span><span class="s1">&lt;/span&gt; &lt;span class="text-xs text-gray-400 font-normal"&gt;(≈NT</span><span class="s15">$</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">andyNet</span><span class="s7">*</span><span class="s5">state</span><span class="s7">.</span><span class="s5">exchangeRate</span><span class="s7">)}</span><span class="s1">)&lt;/span&gt;`</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s7">:</span><span class="s5"> </span><span class="s1">`Andy 需給 Lynn &lt;span class="text-app-accent font-bold"&gt;₩</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s13">Math</span><span class="s7">.</span><span class="s5">abs</span><span class="s7">(</span><span class="s5">andyNet</span><span class="s7">))}</span><span class="s1">&lt;/span&gt; &lt;span class="text-xs text-gray-400 font-normal"&gt;(≈NT</span><span class="s15">$</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s13">Math</span><span class="s7">.</span><span class="s5">abs</span><span class="s7">(</span><span class="s5">andyNet</span><span class="s7">)*</span><span class="s5">state</span><span class="s7">.</span><span class="s5">exchangeRate</span><span class="s7">)}</span><span class="s1">)&lt;/span&gt;`</span><span class="s7">;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> andyAdvance </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">max</span><span class="s7">(</span><span class="s12">0</span><span class="s7">,</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">andy</span><span class="s7">.</span><span class="s1">paid </span><span class="s7">-</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">andy</span><span class="s7">.</span><span class="s1">cost</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> lynnAdvance </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">max</span><span class="s7">(</span><span class="s12">0</span><span class="s7">,</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">lynn</span><span class="s7">.</span><span class="s1">paid </span><span class="s7">-</span><span class="s1"> summary</span><span class="s7">.</span><span class="s1">lynn</span><span class="s7">.</span><span class="s1">cost</span><span class="s7">);</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s1"> html </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="fade-in pb-24"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-[#F2F5F2] p-4 rounded-xl shadow-sm mb-4 border border-[#E6EBE6]"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                         </span>&lt;div class="text-center text-sm font-bold text-gray-600 mb-3 pb-2 border-b border-gray-200"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>結算 (Settlement) &lt;br&gt;&lt;span class="text-base mt-1 block"&gt;</span><span class="s7">${</span><span class="s5">settlementText</span><span class="s7">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="grid grid-cols-2 gap-4"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="text-center"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;h3 class="text-xs text-gray-400 font-bold uppercase mb-1"&gt;Andy&lt;/h3&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="text-[10px] text-gray-500"&gt;代墊: ₩</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">andyAdvance</span><span class="s7">)}</span><span class="s1"> &lt;span class="text-gray-400 block"&gt;≈NT</span><span class="s15">$</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">andyAdvance</span><span class="s7">*</span><span class="s5">state</span><span class="s7">.</span><span class="s5">exchangeRate</span><span class="s7">)}</span><span class="s1">&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="text-[10px] text-gray-500 mt-1"&gt;消費: ₩</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">summary</span><span class="s7">.</span><span class="s5">andy</span><span class="s7">.</span><span class="s5">cost</span><span class="s7">)}</span><span class="s1"> &lt;span class="text-gray-400 block"&gt;≈NT</span><span class="s15">$</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">summary</span><span class="s7">.</span><span class="s5">andy</span><span class="s7">.</span><span class="s5">cost</span><span class="s7">*</span><span class="s5">state</span><span class="s7">.</span><span class="s5">exchangeRate</span><span class="s7">)}</span><span class="s1">&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="text-center border-l border-gray-200"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;h3 class="text-xs text-gray-400 font-bold uppercase mb-1"&gt;Lynn&lt;/h3&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="text-[10px] text-gray-500"&gt;代墊: ₩</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">lynnAdvance</span><span class="s7">)}</span><span class="s1"> &lt;span class="text-gray-400 block"&gt;≈NT</span><span class="s15">$</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">lynnAdvance</span><span class="s7">*</span><span class="s5">state</span><span class="s7">.</span><span class="s5">exchangeRate</span><span class="s7">)}</span><span class="s1">&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="text-[10px] text-gray-500 mt-1"&gt;消費: ₩</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">summary</span><span class="s7">.</span><span class="s5">lynn</span><span class="s7">.</span><span class="s5">cost</span><span class="s7">)}</span><span class="s1"> &lt;span class="text-gray-400 block"&gt;≈NT</span><span class="s15">$</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">summary</span><span class="s7">.</span><span class="s5">lynn</span><span class="s7">.</span><span class="s5">cost</span><span class="s7">*</span><span class="s5">state</span><span class="s7">.</span><span class="s5">exchangeRate</span><span class="s7">)}</span><span class="s1">&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-white p-5 rounded-xl shadow-sm mb-6 border border-gray-100 relative"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-xs font-bold text-app-accent mb-4 uppercase flex justify-between items-center tracking-widest"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span&gt;</span><span class="s7">${</span><span class="s5">state</span><span class="s7">.</span><span class="s5">editingId </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'編輯'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">'新增記帳'</span><span class="s7">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s7">${</span><span class="s5">state</span><span class="s7">.</span><span class="s5">editingId </span><span class="s7">?</span><span class="s5"> </span><span class="s1">`&lt;button onclick="cancelEdit()" class="text-danger"&gt;&lt;i class="fa-solid fa-xmark"&gt;&lt;/i&gt;&lt;/button&gt;`</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">''</span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/h3&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="space-y-4"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="flex gap-2 overflow-x-auto no-scrollbar pb-1"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span></span><span class="s7">${</span><span class="s5">state</span><span class="s7">.</span><span class="s5">itinerary</span><span class="s7">.</span><span class="s5">map</span><span class="s7">((</span><span class="s5">d</span><span class="s7">,</span><span class="s5"> i</span><span class="s7">)</span><span class="s5"> </span><span class="s7">=&gt;</span><span class="s5"> </span><span class="s1">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;label class="flex-shrink-0 cursor-pointer"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;input type="radio" name="expenseDay" value="</span><span class="s7">${</span><span class="s5">i</span><span class="s7">}</span><span class="s1">" class="peer hidden" </span><span class="s7">${</span><span class="s5">i </span><span class="s7">===</span><span class="s5"> state</span><span class="s7">.</span><span class="s5">walletDay </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'checked'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">''</span><span class="s7">}</span><span class="s1"> onchange="state.walletDay=</span><span class="s7">${</span><span class="s5">i</span><span class="s7">}</span><span class="s1">"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;span class="px-3 py-1 rounded-full text-xs bg-[#F5F5F0] text-gray-500 peer-checked:bg-app-accent peer-checked:text-white transition shadow-sm"&gt;</span><span class="s7">${</span><span class="s5">d</span><span class="s7">.</span><span class="s5">shortTitle</span><span class="s7">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;/label&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>`</span><span class="s7">).</span><span class="s5">join</span><span class="s7">(</span><span class="s1">''</span><span class="s7">)}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="grid grid-cols-2 gap-3"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="select-wrapper"&gt;&lt;select id="itemPayer" class="w-full bg-[#F9F9F7] border border-gray-200 rounded-lg p-3 text-sm outline-none appearance-none"&gt;&lt;option value="" disabled selected&gt;誰支付?&lt;/option&gt;</span><span class="s7">${</span><span class="s5">staticData</span><span class="s7">.</span><span class="s5">payers</span><span class="s7">.</span><span class="s5">map</span><span class="s7">(</span><span class="s5">p </span><span class="s7">=&gt;</span><span class="s5"> </span><span class="s1">`&lt;option&gt;</span><span class="s7">${</span><span class="s5">p</span><span class="s7">}</span><span class="s1">&lt;/option&gt;`</span><span class="s7">).</span><span class="s5">join</span><span class="s7">(</span><span class="s1">''</span><span class="s7">)}</span><span class="s1">&lt;/select&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="select-wrapper"&gt;&lt;select id="itemMethod" class="w-full bg-[#F9F9F7] border border-gray-200 rounded-lg p-3 text-sm outline-none appearance-none"&gt;&lt;option value="" disabled selected&gt;支付方式?&lt;/option&gt;</span><span class="s7">${</span><span class="s5">staticData</span><span class="s7">.</span><span class="s5">paymentMethods</span><span class="s7">.</span><span class="s5">map</span><span class="s7">(</span><span class="s5">m </span><span class="s7">=&gt;</span><span class="s5"> </span><span class="s1">`&lt;option&gt;</span><span class="s7">${</span><span class="s5">m</span><span class="s7">}</span><span class="s1">&lt;/option&gt;`</span><span class="s7">).</span><span class="s5">join</span><span class="s7">(</span><span class="s1">''</span><span class="s7">)}</span><span class="s1">&lt;/select&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- Currency Select Dropdown --&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="select-wrapper"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;select id="itemCurrency" class="w-full bg-[#F9F9F7] border border-gray-200 rounded-lg p-3 text-sm outline-none appearance-none font-bold text-app-accent" onchange="setCurrency(this.value)"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;option value="KRW" </span><span class="s7">${</span><span class="s5">state</span><span class="s7">.</span><span class="s5">expenseCurrency </span><span class="s7">===</span><span class="s5"> </span><span class="s1">'KRW'</span><span class="s5"> </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'selected'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">''</span><span class="s7">}</span><span class="s1">&gt;KRW ₩ (韓元)&lt;/option&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;option value="TWD" </span><span class="s7">${</span><span class="s5">state</span><span class="s7">.</span><span class="s5">expenseCurrency </span><span class="s7">===</span><span class="s5"> </span><span class="s1">'TWD'</span><span class="s5"> </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'selected'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">''</span><span class="s7">}</span><span class="s1">&gt;TWD </span><span class="s15">$</span><span class="s1"> (台幣)&lt;/option&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/select&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="relative"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="flex gap-2"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;div class="relative w-full"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;span id="currSymbol" class="absolute left-3 top-3 text-gray-400 text-xs"&gt;</span><span class="s7">${</span><span class="s5">state</span><span class="s7">.</span><span class="s5">expenseCurrency </span><span class="s7">===</span><span class="s5"> </span><span class="s1">'KRW'</span><span class="s5"> </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'₩'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">'$'</span><span class="s7">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span>&lt;input type="number" id="itemAmount" oninput="autoCalcSplit('total'); updateApprox()" placeholder="金額" inputmode="decimal" class="w-full bg-[#F9F9F7] border border-gray-200 rounded-lg p-3 pl-7 text-sm outline-none text-gray-700 font-mono"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;button onclick="openCalc()" class="bg-[#F0F0EB] px-4 rounded-lg text-gray-500 hover:bg-[#E0E0DB] border border-gray-200"&gt;&lt;i class="fa-solid fa-calculator"&gt;&lt;/i&gt;&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div id="approxVal" class="text-[10px] text-gray-400 text-right mt-1 h-4"&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="select-wrapper"&gt;&lt;select id="itemSplit" onchange="toggleUnevenSplit()" class="w-full bg-[#F9F9F7] border border-gray-200 rounded-lg p-3 text-sm outline-none appearance-none"&gt;</span><span class="s7">${</span><span class="s5">staticData</span><span class="s7">.</span><span class="s5">splitOptions</span><span class="s7">.</span><span class="s5">map</span><span class="s7">(</span><span class="s5">s </span><span class="s7">=&gt;</span><span class="s5"> </span><span class="s1">`&lt;option&gt;</span><span class="s7">${</span><span class="s5">s</span><span class="s7">}</span><span class="s1">&lt;/option&gt;`</span><span class="s7">).</span><span class="s5">join</span><span class="s7">(</span><span class="s1">''</span><span class="s7">)}</span><span class="s1">&lt;/select&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div id="unevenSplitInputs" class="hidden grid grid-cols-2 gap-3 bg-gray-50 p-2 rounded-lg border border-dashed border-gray-200"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div&gt;&lt;label class="text-[10px] text-gray-400 block mb-1"&gt;Andy&lt;/label&gt;&lt;input type="number" id="splitAndy" oninput="autoCalcSplit('andy')" class="w-full bg-white border border-gray-200 rounded p-2 text-sm text-center"&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div&gt;&lt;label class="text-[10px] text-gray-400 block mb-1"&gt;Lynn&lt;/label&gt;&lt;input type="number" id="splitLynn" oninput="autoCalcSplit('lynn')" class="w-full bg-white border border-gray-200 rounded p-2 text-sm text-center"&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="select-wrapper"&gt;&lt;select id="itemCat" class="w-full bg-[#F9F9F7] border border-gray-200 rounded-lg p-3 text-sm outline-none appearance-none"&gt;</span><span class="s7">${</span><span class="s5">staticData</span><span class="s7">.</span><span class="s5">categories</span><span class="s7">.</span><span class="s5">map</span><span class="s7">(</span><span class="s5">c </span><span class="s7">=&gt;</span><span class="s5"> </span><span class="s1">`&lt;option&gt;</span><span class="s7">${</span><span class="s5">c</span><span class="s7">}</span><span class="s1">&lt;/option&gt;`</span><span class="s7">).</span><span class="s5">join</span><span class="s7">(</span><span class="s1">''</span><span class="s7">)}</span><span class="s1">&lt;/select&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;input type="text" id="itemName" placeholder="品項名稱" class="w-full bg-[#F9F9F7] border border-gray-200 rounded-lg p-3 text-sm outline-none"&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;label class="flex items-center justify-center gap-2 text-sm text-gray-500 bg-[#F9F9F7] px-3 py-3 rounded-lg cursor-pointer border border-dashed border-gray-300 hover:bg-white hover:border-app-accent transition w-full"&gt;&lt;i class="fa-solid fa-receipt"&gt;&lt;/i&gt;&lt;span id="photoLabel"&gt;上傳收據&lt;/span&gt;&lt;input type="file" id="itemPhoto" accept="image/*" class="hidden" onchange="document.getElementById('photoLabel').innerText = '已選擇'"&gt;&lt;/label&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="submitExpense()" class="w-full bg-app-accent text-white font-bold py-3 rounded-lg shadow-md hover:opacity-90 transition mt-2 tracking-wide"&gt;</span><span class="s7">${</span><span class="s5">state</span><span class="s7">.</span><span class="s5">editingId </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'更新紀錄'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">'加入記帳'</span><span class="s7">}</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex border-b border-gray-200 mb-4 overflow-x-auto no-scrollbar"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                         </span></span><span class="s7">${</span><span class="s5">state</span><span class="s7">.</span><span class="s5">itinerary</span><span class="s7">.</span><span class="s5">map</span><span class="s7">((</span><span class="s5">d</span><span class="s7">,</span><span class="s5"> i</span><span class="s7">)</span><span class="s5"> </span><span class="s7">=&gt;</span><span class="s5"> </span><span class="s1">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="state.walletDay=</span><span class="s7">${</span><span class="s5">i</span><span class="s7">}</span><span class="s1">;renderWallet()" class="flex-1 py-2 text-xs font-bold whitespace-nowrap transition-colors </span><span class="s7">${</span><span class="s5">i </span><span class="s7">===</span><span class="s5"> state</span><span class="s7">.</span><span class="s5">walletDay </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'text-app-accent border-b-2 border-app-accent'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">'text-gray-400 hover:text-gray-500'</span><span class="s7">}</span><span class="s1">"&gt;</span><span class="s7">${</span><span class="s5">d</span><span class="s7">.</span><span class="s5">shortTitle</span><span class="s7">}</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>`</span><span class="s7">).</span><span class="s5">join</span><span class="s7">(</span><span class="s1">''</span><span class="s7">)}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="space-y-3"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span>`</span><span class="s7">;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> dailyExpenses </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expenses</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">e </span><span class="s7">=&gt;</span><span class="s1"> parseInt</span><span class="s7">(</span><span class="s1">e</span><span class="s7">.</span><span class="s1">day</span><span class="s7">)</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">walletDay</span><span class="s7">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s5"> </span><span class="s7">(</span><span class="s5">dailyExpenses</span><span class="s7">.</span><span class="s5">length </span><span class="s7">===</span><span class="s5"> </span><span class="s12">0</span><span class="s7">)</span><span class="s5"> html </span><span class="s7">+=</span><span class="s5"> </span><span class="s1">`&lt;div class="text-center text-gray-300 py-10 text-sm italic"&gt;本日無紀錄&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">[...</span><span class="s1">dailyExpenses</span><span class="s7">].</span><span class="s1">reverse</span><span class="s7">().</span><span class="s1">forEach</span><span class="s7">((</span><span class="s1">item</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> catColor </span><span class="s7">=</span><span class="s1"> staticData</span><span class="s7">.</span><span class="s1">catColors</span><span class="s7">[</span><span class="s1">item</span><span class="s7">.</span><span class="s1">cat</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s8">'bg-gray-100 text-gray-500'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> payerColor </span><span class="s7">=</span><span class="s1"> staticData</span><span class="s7">.</span><span class="s1">payerColors</span><span class="s7">[</span><span class="s1">item</span><span class="s7">.</span><span class="s1">payer</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s8">'bg-gray-100 text-gray-500'</span><span class="s7">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s5"> payerTextClass </span><span class="s7">=</span><span class="s5"> item</span><span class="s7">.</span><span class="s5">payer </span><span class="s7">===</span><span class="s5"> </span><span class="s1">'Andy'</span><span class="s5"> </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'text-blue-500 bg-blue-50'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> item</span><span class="s7">.</span><span class="s5">payer </span><span class="s7">===</span><span class="s5"> </span><span class="s1">'Lynn'</span><span class="s5"> </span><span class="s7">?</span><span class="s5"> </span><span class="s1">'text-pink-500 bg-pink-50'</span><span class="s5"> </span><span class="s7">:</span><span class="s5"> </span><span class="s1">'text-gray-500 bg-gray-100'</span><span class="s7">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s5"> catTextClass </span><span class="s7">=</span><span class="s5"> </span><span class="s7">{</span><span class="s5"> </span><span class="s1">'飲食'</span><span class="s7">:</span><span class="s1">'text-orange-500 bg-orange-50'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'交通'</span><span class="s7">:</span><span class="s1">'text-blue-500 bg-blue-50'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'購物逛街'</span><span class="s7">:</span><span class="s1">'text-pink-500 bg-pink-50'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'住宿'</span><span class="s7">:</span><span class="s1">'text-purple-500 bg-purple-50'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'景點'</span><span class="s7">:</span><span class="s1">'text-emerald-500 bg-emerald-50'</span><span class="s7">,</span><span class="s5"> </span><span class="s1">'門票'</span><span class="s7">:</span><span class="s1">'text-amber-500 bg-amber-50'</span><span class="s5"> </span><span class="s7">}[</span><span class="s5">item</span><span class="s7">.</span><span class="s5">cat</span><span class="s7">]</span><span class="s5"> </span><span class="s7">||</span><span class="s5"> </span><span class="s1">'text-gray-500 bg-gray-50'</span><span class="s7">;</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">let</span><span class="s1"> displayVal </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">item</span><span class="s7">.</span><span class="s1">currency </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'KRW'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">'₩'</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s8">'NT$'</span><span class="s7">}${</span><span class="s1">formatMoney</span><span class="s7">(</span><span class="s1">item</span><span class="s7">.</span><span class="s1">amount</span><span class="s7">)}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">item</span><span class="s7">.</span><span class="s1">currency </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'KRW'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s10">let</span><span class="s1"> approx </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">round</span><span class="s7">(</span><span class="s1">item</span><span class="s7">.</span><span class="s1">amount </span><span class="s7">*</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">exchangeRate</span><span class="s7">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span>displayVal </span><span class="s7">+=</span><span class="s5"> </span><span class="s1">` &lt;span class="text-[10px] text-gray-400 block text-right"&gt;≈ NT</span><span class="s15">$</span><span class="s7">${</span><span class="s5">formatMoney</span><span class="s7">(</span><span class="s5">approx</span><span class="s7">)}</span><span class="s1">&lt;/span&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s1">// If TWD, show approx KRW? Or just TWD. User asked for KRW primary summary, but expense list shows recorded currency.</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s16">// Let's keep it clean.</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>html </span><span class="s7">+=</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="bg-white p-4 rounded-xl shadow-sm flex items-center gap-3 border border-gray-100 relative group transition hover:shadow-md"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="flex-1 min-w-0"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="font-bold text-gray-700 truncate text-sm mb-1"&gt;</span><span class="s7">${</span><span class="s5">item</span><span class="s7">.</span><span class="s5">name</span><span class="s7">}</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="flex flex-wrap gap-1"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;span class="text-[10px] px-2 py-0.5 rounded-full </span><span class="s7">${</span><span class="s5">payerTextClass</span><span class="s7">}</span><span class="s1">"&gt;</span><span class="s7">${</span><span class="s5">item</span><span class="s7">.</span><span class="s5">payer</span><span class="s7">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;span class="text-[10px] px-2 py-0.5 rounded-full </span><span class="s7">${</span><span class="s5">catTextClass</span><span class="s7">}</span><span class="s1">"&gt;</span><span class="s7">${</span><span class="s5">item</span><span class="s7">.</span><span class="s5">cat</span><span class="s7">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;span class="text-[10px] bg-gray-50 text-gray-400 px-2 py-0.5 rounded-full"&gt;</span><span class="s7">${</span><span class="s5">item</span><span class="s7">.</span><span class="s5">method</span><span class="s7">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="text-right"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="font-bold text-app-accent font-mono text-sm leading-tight"&gt;</span><span class="s7">${</span><span class="s5">displayVal</span><span class="s7">}</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="flex gap-3 justify-end mt-2 opacity-100 sm:opacity-0 group-hover:opacity-100 transition"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;button onclick="editExpense('</span><span class="s7">${</span><span class="s5">item</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">')" class="text-gray-400 hover:text-app-accent"&gt;&lt;i class="fa-solid fa-pen"&gt;&lt;/i&gt;&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;button onclick="deleteExpense('</span><span class="s7">${</span><span class="s5">item</span><span class="s7">.</span><span class="s5">id</span><span class="s7">}</span><span class="s1">')" class="text-gray-400 hover:text-danger"&gt;&lt;i class="fa-solid fa-trash-can"&gt;&lt;/i&gt;&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>html </span><span class="s7">+=</span><span class="s1"> </span><span class="s8">`&lt;/div&gt;&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>app</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> html</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> renderMap</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span>app</span><span class="s7">.</span><span class="s5">innerHTML </span><span class="s7">=</span><span class="s5"> </span><span class="s1">`&lt;div class="fade-in h-[85vh] flex flex-col"&gt;&lt;div class="bg-white p-3 rounded-lg shadow-sm mb-3 text-center text-xs text-gray-500 border border-gray-100 flex items-center justify-center gap-2"&gt;&lt;i class="fa-solid fa-hand-pointer text-app-accent"&gt;&lt;/i&gt; 雙指縮放&lt;a href="https://map.naver.com/" target="_blank" class="text-app-accent underline ml-2"&gt;開啟 Naver&lt;/a&gt;&lt;/div&gt;&lt;div class="map-wrapper bg-white rounded-xl shadow-inner border border-gray-200 relative overflow-hidden" id="mapContainer"&gt;&lt;img id="mapImg" src="https://upload.wikimedia.org/wikipedia/commons/b/b6/Seoul_subway_linemap_en_ko.png" class="absolute top-0 left-0 min-w-[150%] h-auto origin-top-left touch-none" alt="Map"&gt;&lt;/div&gt;&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout</span><span class="s7">(()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> i</span><span class="s7">=</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'mapImg'</span><span class="s7">);</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">i</span><span class="s7">)</span><span class="s1"> i</span><span class="s7">.</span><span class="s1">style</span><span class="s7">.</span><span class="s1">position</span><span class="s7">=</span><span class="s8">'absolute'</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'mapContainer'</span><span class="s7">).</span><span class="s1">style</span><span class="s7">.</span><span class="s1">overflow</span><span class="s7">=</span><span class="s8">'auto'</span><span class="s7">;</span><span class="s1"> </span><span class="s7">},</span><span class="s1"> </span><span class="s12">100</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> renderLists</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s5"> html </span><span class="s7">=</span><span class="s5"> </span><span class="s1">`&lt;div class="fade-in space-y-6 pb-20"&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> groups </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{};</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">checklist</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">i </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(!</span><span class="s1">groups</span><span class="s7">[</span><span class="s1">i</span><span class="s7">.</span><span class="s1">category</span><span class="s7">])</span><span class="s1"> groups</span><span class="s7">[</span><span class="s1">i</span><span class="s7">.</span><span class="s1">category</span><span class="s7">]=[];</span><span class="s1"> groups</span><span class="s7">[</span><span class="s1">i</span><span class="s7">.</span><span class="s1">category</span><span class="s7">].</span><span class="s1">push</span><span class="s7">(</span><span class="s1">i</span><span class="s7">);</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">for</span><span class="s7">(</span><span class="s10">let</span><span class="s1"> cat </span><span class="s10">in</span><span class="s1"> groups</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>html </span><span class="s7">+=</span><span class="s5"> </span><span class="s1">`&lt;div class="bg-white p-5 rounded-xl shadow-sm border border-gray-50"&gt;&lt;h2 class="text-sm font-bold text-app-accent mb-4 border-b border-[#F0F0F0] pb-2"&gt;</span><span class="s7">${</span><span class="s5">cat</span><span class="s7">}</span><span class="s1">&lt;/h2&gt;&lt;div class="grid grid-cols-2 gap-y-3 gap-x-4"&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>groups</span><span class="s7">[</span><span class="s1">cat</span><span class="s7">].</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">item </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> idx </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">checklist</span><span class="s7">.</span><span class="s1">findIndex</span><span class="s7">(</span><span class="s1">x </span><span class="s7">=&gt;</span><span class="s1"> x</span><span class="s7">.</span><span class="s1">text </span><span class="s7">===</span><span class="s1"> item</span><span class="s7">.</span><span class="s1">text </span><span class="s7">&amp;&amp;</span><span class="s1"> x</span><span class="s7">.</span><span class="s1">category </span><span class="s7">===</span><span class="s1"> item</span><span class="s7">.</span><span class="s1">category</span><span class="s7">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span>html </span><span class="s7">+=</span><span class="s5"> </span><span class="s1">`&lt;label class="flex items-center cursor-pointer select-none group"&gt;&lt;input type="checkbox" class="hidden custom-checkbox" </span><span class="s7">${</span><span class="s5">item</span><span class="s7">.</span><span class="s5">checked</span><span class="s7">?</span><span class="s1">'checked'</span><span class="s7">:</span><span class="s1">''</span><span class="s7">}</span><span class="s1"> onchange="toggleCheck(</span><span class="s7">${</span><span class="s5">idx</span><span class="s7">}</span><span class="s1">)"&gt;&lt;div class="w-4 h-4 border border-gray-300 rounded mr-2 flex items-center justify-center transition-colors bg-gray-50 group-hover:border-app-accent"&gt;&lt;/div&gt;&lt;span class="text-sm </span><span class="s7">${</span><span class="s5">item</span><span class="s7">.</span><span class="s5">checked</span><span class="s7">?</span><span class="s1">'text-gray-300 line-through'</span><span class="s7">:</span><span class="s1">'text-gray-600'</span><span class="s7">}</span><span class="s1"> group-hover:text-app-accent transition-colors"&gt;</span><span class="s7">${</span><span class="s5">item</span><span class="s7">.</span><span class="s5">text</span><span class="s7">}</span><span class="s1">&lt;/span&gt;&lt;/label&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>html </span><span class="s7">+=</span><span class="s1"> </span><span class="s8">`&lt;/div&gt;&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>app</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> html </span><span class="s7">+</span><span class="s1"> </span><span class="s8">`&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> renderInfo</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p9"><span class="s17"><span class="Apple-converted-space">            </span>app</span><span class="s18">.</span><span class="s17">innerHTML </span><span class="s18">=</span><span class="s17"> </span><span class="s11">`&lt;div class="fade-in grid gap-4"&gt;&lt;a href="https://n.weather.naver.com/" target="_blank" class="bg-blue-50/50 p-6 rounded-xl flex items-center justify-between border border-blue-50 hover:shadow-md transition"&gt;&lt;div&gt;&lt;h3 class="font-bold text-[#6B8096] text-lg"&gt;首爾天氣&lt;/h3&gt;&lt;p class="text-xs text-[#8A9BB0] mt-1"&gt;Naver Weather&lt;/p&gt;&lt;/div&gt;&lt;i class="fa-solid fa-cloud-sun text-3xl text-[#A0B0C0]"&gt;&lt;/i&gt;&lt;/a&gt;&lt;div class="bg-[#FFF5F5] p-6 rounded-xl border border-red-50"&gt;&lt;h3 class="font-bold text-[#C08080] text-lg mb-3"&gt;&lt;i class="fa-solid fa-phone mr-2"&gt;&lt;/i&gt;緊急聯絡&lt;/h3&gt;&lt;div class="space-y-2 text-sm text-gray-600"&gt;&lt;div class="flex justify-between border-b border-red-100/50 pb-2"&gt;&lt;span&gt;警察&lt;/span&gt;&lt;span class="font-mono font-bold text-[#D48989] text-lg"&gt;112&lt;/span&gt;&lt;/div&gt;&lt;div class="flex justify-between border-b border-red-100/50 pb-2"&gt;&lt;span&gt;救護車&lt;/span&gt;&lt;span class="font-mono font-bold text-[#D48989] text-lg"&gt;119&lt;/span&gt;&lt;/div&gt;&lt;div class="pt-1"&gt;&lt;span class="block font-bold text-gray-700 mb-1"&gt;觀光諮詢&lt;/span&gt;&lt;span class="block font-mono text-gray-500"&gt;1330&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;`</span><span class="s18">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> router</span><span class="s7">(</span><span class="s1">target</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>state</span><span class="s7">.</span><span class="s1">activeTab </span><span class="s7">=</span><span class="s1"> target</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>document</span><span class="s7">.</span><span class="s1">querySelectorAll</span><span class="s7">(</span><span class="s8">'.nav-btn'</span><span class="s7">).</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">btn </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>btn</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">toggle</span><span class="s7">(</span><span class="s8">'text-app-accent'</span><span class="s7">,</span><span class="s1"> btn</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">target </span><span class="s7">===</span><span class="s1"> target</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>btn</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">toggle</span><span class="s7">(</span><span class="s8">'text-gray-400'</span><span class="s7">,</span><span class="s1"> btn</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">target </span><span class="s7">!==</span><span class="s1"> target</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">target </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'plan'</span><span class="s7">)</span><span class="s1"> renderPlan</span><span class="s7">();</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">target </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'map'</span><span class="s7">)</span><span class="s1"> renderMap</span><span class="s7">();</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">target </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'wallet'</span><span class="s7">)</span><span class="s1"> renderWallet</span><span class="s7">();</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">target </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'lists'</span><span class="s7">)</span><span class="s1"> renderLists</span><span class="s7">();</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">target </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'info'</span><span class="s7">)</span><span class="s1"> renderInfo</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>window</span><span class="s7">.</span><span class="s1">scrollTo</span><span class="s7">(</span><span class="s12">0</span><span class="s7">,</span><span class="s12">0</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> setCurrency</span><span class="s7">(</span><span class="s1">c</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>state</span><span class="s7">.</span><span class="s1">expenseCurrency </span><span class="s7">=</span><span class="s1"> c</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>updateApprox</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'currSymbol'</span><span class="s7">).</span><span class="s1">innerText </span><span class="s7">=</span><span class="s1"> c </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'KRW'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">'₩'</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s8">'$'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> updateApprox</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> val </span><span class="s7">=</span><span class="s1"> parseFloat</span><span class="s7">(</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemAmount'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> disp </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'approxVal'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">state</span><span class="s7">.</span><span class="s1">expenseCurrency </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'KRW'</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s7">!</span><span class="s1">isNaN</span><span class="s7">(</span><span class="s1">val</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>disp</span><span class="s7">.</span><span class="s1">innerText </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`≈ NT</span><span class="s15">$</span><span class="s7">${</span><span class="s13">Math</span><span class="s7">.</span><span class="s1">round</span><span class="s7">(</span><span class="s1">val </span><span class="s7">*</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">exchangeRate</span><span class="s7">).</span><span class="s1">toLocaleString</span><span class="s7">()}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>disp</span><span class="s7">.</span><span class="s1">innerText </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> toggleUnevenSplit</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> s </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemSplit'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'unevenSplitInputs'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">toggle</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">,</span><span class="s1"> s </span><span class="s7">!==</span><span class="s1"> </span><span class="s8">'不平均分攤'</span><span class="s7">);</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'unevenSplitInputs'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">toggle</span><span class="s7">(</span><span class="s8">'grid'</span><span class="s7">,</span><span class="s1"> s </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'不平均分攤'</span><span class="s7">);</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> autoCalcSplit</span><span class="s7">(</span><span class="s1">src</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> total </span><span class="s7">=</span><span class="s1"> parseFloat</span><span class="s7">(</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemAmount'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">)||</span><span class="s12">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> aIn </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'splitAndy'</span><span class="s7">);</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> lIn </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'splitLynn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s7">(</span><span class="s1">src</span><span class="s7">===</span><span class="s8">'andy'</span><span class="s7">)</span><span class="s1"> lIn</span><span class="s7">.</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> total </span><span class="s7">-</span><span class="s1"> </span><span class="s7">(</span><span class="s1">parseFloat</span><span class="s7">(</span><span class="s1">aIn</span><span class="s7">.</span><span class="s1">value</span><span class="s7">)||</span><span class="s12">0</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">src</span><span class="s7">===</span><span class="s8">'lynn'</span><span class="s7">)</span><span class="s1"> aIn</span><span class="s7">.</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> total </span><span class="s7">-</span><span class="s1"> </span><span class="s7">(</span><span class="s1">parseFloat</span><span class="s7">(</span><span class="s1">lIn</span><span class="s7">.</span><span class="s1">value</span><span class="s7">)||</span><span class="s12">0</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> addExpense</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> name</span><span class="s7">=</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemName'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">,</span><span class="s1"> amount</span><span class="s7">=</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemAmount'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">,</span><span class="s1"> payer</span><span class="s7">=</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemPayer'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">,</span><span class="s1"> method</span><span class="s7">=</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemMethod'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">,</span><span class="s1"> cat</span><span class="s7">=</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemCat'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">,</span><span class="s1"> split</span><span class="s7">=</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemSplit'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s1"> day </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">walletDay</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementsByName</span><span class="s7">(</span><span class="s8">'expenseDay'</span><span class="s7">).</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">r </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">r</span><span class="s7">.</span><span class="s1">checked</span><span class="s7">)</span><span class="s1"> day </span><span class="s7">=</span><span class="s1"> parseInt</span><span class="s7">(</span><span class="s1">r</span><span class="s7">.</span><span class="s1">value</span><span class="s7">);</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> val </span><span class="s7">=</span><span class="s1"> safeCalculate</span><span class="s7">(</span><span class="s1">amount</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s7">(!</span><span class="s1">name </span><span class="s7">||</span><span class="s1"> val</span><span class="s7">===</span><span class="s10">null</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s7">!</span><span class="s1">payer </span><span class="s7">||</span><span class="s1"> </span><span class="s7">!</span><span class="s1">method</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> alert</span><span class="s7">(</span><span class="s8">'請完整填寫'</span><span class="s7">);</span><span class="s1"> </span><span class="s10">return</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s1"> cSplit </span><span class="s7">=</span><span class="s1"> </span><span class="s10">null</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s7">(</span><span class="s1">split</span><span class="s7">===</span><span class="s8">'不平均分攤'</span><span class="s7">)</span><span class="s1"> cSplit </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> andy</span><span class="s7">:</span><span class="s1"> parseFloat</span><span class="s7">(</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'splitAndy'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">)||</span><span class="s12">0</span><span class="s7">,</span><span class="s1"> lynn</span><span class="s7">:</span><span class="s1"> parseFloat</span><span class="s7">(</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'splitLynn'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">)||</span><span class="s12">0</span><span class="s1"> </span><span class="s7">};</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> item </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">editingId</span><span class="s7">||</span><span class="s1">generateId</span><span class="s7">(),</span><span class="s1"> day</span><span class="s7">,</span><span class="s1"> cat</span><span class="s7">,</span><span class="s1"> split</span><span class="s7">,</span><span class="s1"> name</span><span class="s7">,</span><span class="s1"> amount</span><span class="s7">:</span><span class="s1"> val</span><span class="s7">,</span><span class="s1"> payer</span><span class="s7">,</span><span class="s1"> method</span><span class="s7">,</span><span class="s1"> currency</span><span class="s7">:</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expenseCurrency</span><span class="s7">,</span><span class="s1"> customSplit</span><span class="s7">:</span><span class="s1"> cSplit</span><span class="s7">,</span><span class="s1"> date</span><span class="s7">:</span><span class="s1"> </span><span class="s10">new</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">().</span><span class="s1">toLocaleDateString</span><span class="s7">()</span><span class="s1"> </span><span class="s7">};</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s7">(</span><span class="s1">state</span><span class="s7">.</span><span class="s1">editingId</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> idx </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expenses</span><span class="s7">.</span><span class="s1">findIndex</span><span class="s7">(</span><span class="s1">e</span><span class="s7">=&gt;</span><span class="s1">e</span><span class="s7">.</span><span class="s1">id</span><span class="s7">===</span><span class="s1">state</span><span class="s7">.</span><span class="s1">editingId</span><span class="s7">);</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">idx!==-</span><span class="s12">1</span><span class="s7">)</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expenses</span><span class="s7">[</span><span class="s1">idx</span><span class="s7">]=</span><span class="s1">item</span><span class="s7">;</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">editingId</span><span class="s7">=</span><span class="s10">null</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">else</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expenses</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">item</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>saveToLS</span><span class="s7">();</span><span class="s1"> renderWallet</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> editExpense</span><span class="s7">(</span><span class="s1">id</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> ex </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expenses</span><span class="s7">.</span><span class="s1">find</span><span class="s7">(</span><span class="s1">e </span><span class="s7">=&gt;</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">id </span><span class="s7">===</span><span class="s1"> id</span><span class="s7">);</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(!</span><span class="s1">ex</span><span class="s7">)</span><span class="s1"> </span><span class="s10">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>state</span><span class="s7">.</span><span class="s1">editingId </span><span class="s7">=</span><span class="s1"> id</span><span class="s7">;</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">walletDay </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">day</span><span class="s7">;</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expenseCurrency </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">currency </span><span class="s7">||</span><span class="s1"> </span><span class="s8">'KRW'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>renderWallet</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout</span><span class="s7">(()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemPayer'</span><span class="s7">).</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">payer</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemMethod'</span><span class="s7">).</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">method</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemAmount'</span><span class="s7">).</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">amount</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemSplit'</span><span class="s7">).</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">split</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemCat'</span><span class="s7">).</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">cat</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemName'</span><span class="s7">).</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">name</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemCurrency'</span><span class="s7">).</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expenseCurrency</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>toggleUnevenSplit</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s7">(</span><span class="s1">ex</span><span class="s7">.</span><span class="s1">customSplit</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'splitAndy'</span><span class="s7">).</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">customSplit</span><span class="s7">.</span><span class="s1">andy</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'splitLynn'</span><span class="s7">).</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> ex</span><span class="s7">.</span><span class="s1">customSplit</span><span class="s7">.</span><span class="s1">lynn</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>updateApprox</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">},</span><span class="s1"> </span><span class="s12">50</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> cancelEdit</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">editingId </span><span class="s7">=</span><span class="s1"> </span><span class="s10">null</span><span class="s7">;</span><span class="s1"> renderWallet</span><span class="s7">();</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> deleteExpense</span><span class="s7">(</span><span class="s1">id</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">confirm</span><span class="s7">(</span><span class="s8">'刪除?'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">expenses</span><span class="s7">=</span><span class="s1">state</span><span class="s7">.</span><span class="s1">expenses</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">e</span><span class="s7">=&gt;</span><span class="s1">e</span><span class="s7">.</span><span class="s1">id</span><span class="s7">!==</span><span class="s1">id</span><span class="s7">);</span><span class="s1"> saveToLS</span><span class="s7">();</span><span class="s1"> renderWallet</span><span class="s7">();</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> toggleCheck</span><span class="s7">(</span><span class="s1">i</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> state</span><span class="s7">.</span><span class="s1">checklist</span><span class="s7">[</span><span class="s1">i</span><span class="s7">].</span><span class="s1">checked </span><span class="s7">=</span><span class="s1"> </span><span class="s7">!</span><span class="s1">state</span><span class="s7">.</span><span class="s1">checklist</span><span class="s7">[</span><span class="s1">i</span><span class="s7">].</span><span class="s1">checked</span><span class="s7">;</span><span class="s1"> saveToLS</span><span class="s7">();</span><span class="s1"> renderLists</span><span class="s7">();</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">let</span><span class="s1"> calcVal </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'0'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> openCalc</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'calcModal'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span><span class="s1"> calcVal</span><span class="s7">=</span><span class="s8">'0'</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'calcDisplay'</span><span class="s7">).</span><span class="s1">innerText</span><span class="s7">=</span><span class="s8">'0'</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> closeCalc</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'calcModal'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> calcAppend</span><span class="s7">(</span><span class="s1">c</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">calcVal</span><span class="s7">===</span><span class="s8">'0'</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s7">![</span><span class="s8">'.'</span><span class="s7">,</span><span class="s8">'/'</span><span class="s7">,</span><span class="s8">'*'</span><span class="s7">,</span><span class="s8">'-'</span><span class="s7">,</span><span class="s8">'+'</span><span class="s7">].</span><span class="s1">includes</span><span class="s7">(</span><span class="s1">c</span><span class="s7">))</span><span class="s1"> calcVal</span><span class="s7">=</span><span class="s1">c</span><span class="s7">;</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> calcVal</span><span class="s7">+=</span><span class="s1">c</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'calcDisplay'</span><span class="s7">).</span><span class="s1">innerText</span><span class="s7">=</span><span class="s1">calcVal</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> calcClear</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> calcVal</span><span class="s7">=</span><span class="s8">'0'</span><span class="s7">;</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'calcDisplay'</span><span class="s7">).</span><span class="s1">innerText</span><span class="s7">=</span><span class="s8">'0'</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> calcConfirm</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">const</span><span class="s1"> r</span><span class="s7">=</span><span class="s1">safeCalculate</span><span class="s7">(</span><span class="s1">calcVal</span><span class="s7">);</span><span class="s1"> </span><span class="s10">if</span><span class="s7">(</span><span class="s1">r</span><span class="s7">!==</span><span class="s10">null</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'itemAmount'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">=</span><span class="s1">r</span><span class="s7">;</span><span class="s1"> autoCalcSplit</span><span class="s7">(</span><span class="s8">'total'</span><span class="s7">);</span><span class="s1"> updateApprox</span><span class="s7">();</span><span class="s1"> closeCalc</span><span class="s7">();</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>window</span><span class="s7">.</span><span class="s1">submitExpense </span><span class="s7">=</span><span class="s1"> addExpense</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>router</span><span class="s7">(</span><span class="s8">'plan'</span><span class="s7">);</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
</body>
</html>
